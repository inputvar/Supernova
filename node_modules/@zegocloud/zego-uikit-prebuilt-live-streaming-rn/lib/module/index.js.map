{"version":3,"names":["React","useEffect","useState","useRef","useImperativeHandle","forwardRef","useCallback","Image","Text","ImageBackground","Alert","StyleSheet","View","SafeAreaView","Platform","KeyboardAvoidingView","TouchableOpacity","ZegoUIKit","ZegoRoomPropertyUpdateType","ZegoInRoomMessageInput","ZegoInRoomMessageView","ZegoAudioVideoContainer","ZegoLayoutMode","ZegoSwitchCameraButton","ZegoUIKitPluginType","ZegoBottomBar","useKeyboard","zloginfo","ZegoMenuBarButtonName","ZegoStartLiveButton","ZegoLiveStreamingMemberList","ZegoCoHostMenuDialog","ZegoToast","ZegoDialog","ZegoPrebuiltPlugins","getShotName","grantPermissions","durationFormat","ZegoAudioVideoForegroundView","HOST_DEFAULT_CONFIG","AUDIENCE_DEFAULT_CONFIG","ZegoLiveStreamingRole","ZegoLiveStatus","ZegoTranslationText","ZegoInvitationType","ZegoCoHostConnectState","ZegoToastType","ZegoTopBar","MinimizingHelper","PrebuiltHelper","ZegoUIKitPrebuiltLiveStreamingFloatingMinimizedView","ZegoUIKitPrebuiltLiveStreaming","props","ref","appID","appSign","userID","userName","liveID","config","plugins","isMinimizeSwitch","getInstance","getIsMinimizeSwitch","notifyEntryNormal","role","undefined","audience","Object","assign","translationText","deviceConfirmDialogInfo","setInitParams","showDefaultDeviceOnDialog","isCamera","formUser","console","log","Promise","resolve","reject","title","message","cancelButtonName","confirmButtonName","alert","text","onPress","style","audioVideoViewConfig","bottomMenuBarConfig","topMenuBarConfig","memberListConfig","inRoomMessageViewConfig","confirmDialogInfo","onLeaveLiveStreaming","onLeaveLiveStreamingConfirming","onLiveStreamingEnded","onStartLiveButtonPressed","startLiveButtonBuilder","markAsLargeRoom","onCameraTurnOnByOthersConfirmation","bind","onMicrophoneTurnOnByOthersConfirmation","durationConfig","showSoundWavesInAudioMode","useVideoViewAspectFill","foregroundBuilder","showMicrophoneState","showCameraState","itemBuilder","messageItemBuilder","showInRoomMessageButton","hostButtons","toggleCameraButton","toggleMicrophoneButton","switchCameraButton","coHostButtons","coHostControlButton","audienceButtons","length","find","plugin","ZIMConnectionState","hostExtendButtons","coHostExtendButtons","audienceExtendButtons","maxCount","buttons","leaveButton","isVisible","onDurationUpdate","stateData","getStateData","turnOnCameraWhenJoining","setTurnOnCameraWhenJoining","current","turnOnMicrophoneWhenJoining","setTurnOnMicrophoneWhenJoining","useSpeakerWhenJoining","setUseSpeakerWhenJoining","keyboardHeight","textInputVisable","setTextInputVisable","textInput","setTextInput","textInputHeight","setTextInputHeight","setRole","hostID","setHostID","liveStatus","setLiveStatus","memberCount","setMemberCount","isMemberListVisable","setIsMemberListVisable","isPluginsInit","setIsPluginsInit","requestCoHostCount","setRequestCoHostCount","memberConnectStateMap","setMemberConnectStateMap","isCoHostDialogVisable","setIsCoHostDialogVisable","coHostDialogExtendedData","setCoHostDialogExtendedData","isToastVisable","setIsToastVisable","toastExtendedData","setToastExtendedData","notifyZegoDialogTrigger","isDialogVisable","dialogExtendedData","setDialogExtendedData","duration","setDuration","callbackID","String","Math","floor","random","hideCountdownOnToastLimit","hideCountdownOnDialogLimit","hideCountdownOnToast","hideCountdownOn_Dialog","hideCountdownOn_DialogTimer","liveStreamingTiming","liveStreamingTimingTimer","realTimeData","getRealTimeData","isIgnore","shouldSortHostAtFirst","debounce","isPageInBackground","isMinimize","getIsMinimize","registerPluginCallback","getPlugin","signaling","getSignalingPlugin","onInvitationReceived","callID","type","inviter","data","JSON","stringify","requestCoHost","success","receivedRequestCoHostToast","replace","id","connecting","setTimeout","forceSortMemberList","inviteToCoHost","temp","receivedCoHostInvitationDialogInfo","content","cancelText","okText","onCancel","refuseInvitation","then","idle","turnCameraOn","turnMicrophoneOn","setIsDialogVisableHandle","onOk","acceptInvitation","connected","error","coHost","removeCoHost","onInvitationCanceled","onInvitationTimeout","onInvitationAccepted","invitee","resetTimer","inviteeID","onInvitationRefused","audienceRejectInvitationToast","onInRoomTextMessageReceived","messageList","warn","unRegisterPluginCallback","initDialogTimer","clearInterval","startDialogTimer","setInterval","visable","startLiveStreamingTimingTimer","restart","initLiveStreamingTimingTimer","leave","showConfirmation","tempHandle","leaveRoom","onLeaveLiveStreamingConfirmingWrap","minimizeWindow","onRoomStateChanged","isRoomConnected","host","updateRoomProperties","live_status","default","onUserJoin","count","getAllUsers","onUserLeave","onRoomPropertiesFullUpdated","keys","oldRoomProperties","roomProperties","onRoomPropertyUpdated","key","oldValue","value","remote","parseInt","stopPlayingAllAudioVideo","start","cancelInvitation","forceSortAudioVideoList","startPlayingAllAudioVideo","onUserInfoUpdate","userInfo","isMicDeviceOn","isCameraDeviceOn","onAudioVideoAvailable","userList","forEach","onAudioVideoUnavailable","onTurnOnYourCameraRequest","onTurnOnYourMicrophoneRequest","onMeRemovedFromRoom","onInRoomCommandReceived","fromUser","command","onMicrophoneOn","targetUserID","isOn","onCameraOn","onAudioOutputDeviceChanged","onWindowMinimized","setIsMinimizeSwitch","clearRealTimeData","clearState","clearNotify","init","result","notifyPrebuiltInit","joinRoom","setAudioOutputToSpeaker","uninit","showAudioVideoContainer","showStartLiveButton","showBottomBar","showMessageListView","onFullPageTouch","useInterval","callback","delay","savedCallback","tick","getHostNameByID","getUser","hostName","onMemberButtonPressed","onNavBackPressed","leaveHandle","sortAudioVideo","globalAudioVideoUserList","index","findIndex","splice","unshift","onStartLiveStreaming","showDefaultLeaveDialog","catch","connectStateChangedHandle","changedUserID","connectState","isClosure","coHostDisagreeHandle","coHostAgreeHandle","styles","container","fillParent","cacheAudioVideoUserList","filter","user","isCameraOn","isMicrophoneOn","mode","pictureInPicture","removeViewWhenAudioVideoUnavailable","zIndex","noHostBg","require","noHostTips","noHostOnline","topBarContainer","left","hostInfo","show","avatar","nameLabel","navBackButton","right","memberButton","memberCountLabel","memberRedDot","startLiveButtonCon","timingContainer","timing","messageListView","invitationType","dismissArea","bottom","OS","messageInputPannel","height","input","create","position","width","maxHeight","borderTopLeftRadius","borderTopRightRadius","backgroundColor","flex","alignItems","justifyContent","top","flexDirection","paddingTop","paddingBottom","borderRadius","paddingLeft","paddingRight","marginLeft","display","marginRight","fontSize","color","resizeMode","lineHeight","textAlign"],"sources":["index.tsx"],"sourcesContent":["import React, {\n  useEffect,\n  useState,\n  useRef,\n  useImperativeHandle,\n  forwardRef,\n  useCallback,\n} from 'react';\nimport { Image, Text, ImageBackground, Alert } from 'react-native';\n\nimport {\n  StyleSheet,\n  View,\n  SafeAreaView,\n  Platform,\n  KeyboardAvoidingView,\n  TouchableOpacity,\n} from 'react-native';\nimport ZegoUIKit, {\n  ZegoRoomPropertyUpdateType,\n  ZegoInRoomMessageInput,\n  ZegoInRoomMessageView,\n  ZegoAudioVideoContainer,\n  ZegoLayoutMode,\n  ZegoSwitchCameraButton,\n  ZegoUIKitPluginType,\n} from '@zegocloud/zego-uikit-rn';\nimport ZegoBottomBar from './components/ZegoBottomBar';\nimport { useKeyboard } from './utils/keyboard';\nimport { zloginfo } from './utils/logger';\nimport ZegoMenuBarButtonName from './components/ZegoMenuBarButtonName';\nimport ZegoStartLiveButton from './components/ZegoStartLiveButton';\nimport ZegoLiveStreamingMemberList from './components/ZegoLiveStreamingMemberList';\nimport ZegoCoHostMenuDialog from \"./components/ZegoCoHostMenuDialog\";\nimport ZegoToast from \"./components/ZegoToast\";\nimport ZegoDialog from \"./components/ZegoDialog\";\nimport ZegoPrebuiltPlugins from './services/plugins';\nimport { getShotName, grantPermissions, durationFormat } from './utils';\nimport ZegoAudioVideoForegroundView from './components/ZegoAudioVideoForegroundView';\nimport {\n  HOST_DEFAULT_CONFIG,\n  AUDIENCE_DEFAULT_CONFIG,\n  ZegoLiveStreamingRole,\n  ZegoLiveStatus,\n  ZegoTranslationText,\n  ZegoInvitationType,\n  ZegoCoHostConnectState,\n  ZegoToastType,\n} from \"./services/defines\";\nimport ZegoTopBar from \"./components/ZegoTopBar\";\nimport MinimizingHelper from \"./services/minimizing_helper\";\nimport PrebuiltHelper from \"./services/prebuilt_helper\";\nimport ZegoUIKitPrebuiltLiveStreamingFloatingMinimizedView from \"./components/ZegoUIKitPrebuiltLiveStreamingFloatingMinimizedView\";\n\nexport {\n  ZegoMenuBarButtonName,\n  HOST_DEFAULT_CONFIG,\n  AUDIENCE_DEFAULT_CONFIG,\n  ZegoUIKitPrebuiltLiveStreamingFloatingMinimizedView,\n};\n\n// https://github.com/react-native-community/hooks#usekeyboard\nfunction ZegoUIKitPrebuiltLiveStreaming(props: any, ref: React.Ref<unknown>) {\n  let { appID, appSign, userID, userName, liveID, config, plugins = [] } = props;\n  const isMinimizeSwitch = MinimizingHelper.getInstance().getIsMinimizeSwitch();\n  if (isMinimizeSwitch) {\n    // const initAppInfo = MinimizingHelper.getInstance().getInitAppInfo();\n    // const initUser = MinimizingHelper.getInstance().getInitUser();\n    // const initLiveID = MinimizingHelper.getInstance().getInitRoomID();\n    // const initConfig = MinimizingHelper.getInstance().getInitConfig();\n    // const initPlugins = MinimizingHelper.getInstance().getInitPlugins();\n    // appID = initAppInfo.appID;\n    // appSign = initAppInfo.appSign\n    // userID = initUser.userID;\n    // userName = initUser.userName;\n    // liveID = initLiveID;\n    // config = initConfig;\n    // plugins = initPlugins;\n  } else {\n    MinimizingHelper.getInstance().notifyEntryNormal();\n    config.role === undefined && (config.role = ZegoLiveStreamingRole.audience);\n    Object.assign(ZegoTranslationText, config.translationText || {});\n    config.deviceConfirmDialogInfo === undefined && (config.deviceConfirmDialogInfo = {});\n    MinimizingHelper.getInstance().setInitParams(appID, appSign, userID, userName, liveID, config);\n  }\n  \n  const showDefaultDeviceOnDialog = (isCamera: boolean, formUser: any) => {\n    console.log('########showDefaultDeviceOnDialog', formUser, isCamera);\n    return new Promise<void>((resolve, reject) => {\n      const {\n        title = `${formUser.userID} wants to turn on your ${isCamera ? 'camera' : 'microphone'}`,\n        message = `Are you sure to turn on your ${isCamera ? 'camera' : 'microphone'}?`,\n        cancelButtonName = \"Cancel\",\n        confirmButtonName = \"Confirm\"\n      } = config.deviceConfirmDialogInfo;\n      Alert.alert(\n        title,\n        message,\n        [\n          {\n            text: cancelButtonName,\n            onPress: () => reject(),\n            style: \"cancel\"\n          },\n          {\n            text: confirmButtonName,\n            onPress: () => resolve()\n          }\n        ]\n      );\n    })\n  }\n\n  const {\n    // turnOnCameraWhenJoining = true,\n    // turnOnMicrophoneWhenJoining = true,\n    // useSpeakerWhenJoining = true,\n    audioVideoViewConfig = {},\n    bottomMenuBarConfig = {},\n    topMenuBarConfig = {},\n    memberListConfig = {},\n    inRoomMessageViewConfig = {},\n    confirmDialogInfo = {},\n    onLeaveLiveStreaming,\n    onLeaveLiveStreamingConfirming,\n    onLiveStreamingEnded,\n    onStartLiveButtonPressed,\n    startLiveButtonBuilder,\n    markAsLargeRoom = false,\n    // @ts-ignore\n    onCameraTurnOnByOthersConfirmation = showDefaultDeviceOnDialog.bind(this, true),\n    // @ts-ignore\n    onMicrophoneTurnOnByOthersConfirmation = showDefaultDeviceOnDialog.bind(this, false),\n    durationConfig = {},\n  } = config;\n  const {\n    showSoundWavesInAudioMode = true,\n    useVideoViewAspectFill = true,\n    foregroundBuilder,\n  } = audioVideoViewConfig;\n  const {\n    showMicrophoneState = true,\n    showCameraState = true,\n    itemBuilder,\n  } = memberListConfig;\n  const { itemBuilder: messageItemBuilder } = inRoomMessageViewConfig;\n  const {\n    showInRoomMessageButton = true,\n    hostButtons = [ZegoMenuBarButtonName.toggleCameraButton, ZegoMenuBarButtonName.toggleMicrophoneButton, ZegoMenuBarButtonName.switchCameraButton],\n    coHostButtons = [ZegoMenuBarButtonName.toggleCameraButton, ZegoMenuBarButtonName.toggleMicrophoneButton, ZegoMenuBarButtonName.switchCameraButton, ZegoMenuBarButtonName.coHostControlButton],\n    audienceButtons = plugins && plugins.length && plugins.find((plugin: any) => plugin.ZIMConnectionState) ? [ZegoMenuBarButtonName.coHostControlButton] : [],\n    hostExtendButtons = [],\n    coHostExtendButtons = [],\n    audienceExtendButtons = [],\n    maxCount = 5,\n  } = bottomMenuBarConfig;\n  const {\n    buttons = [ZegoMenuBarButtonName.leaveButton],\n  } = topMenuBarConfig;\n  const {\n    isVisible = true,\n    onDurationUpdate\n  } = durationConfig;\n\n  const stateData = useRef(PrebuiltHelper.getInstance().getStateData());\n\n  const [turnOnCameraWhenJoining, setTurnOnCameraWhenJoining] = \n    useState(\n      stateData.current.turnOnCameraWhenJoining !== undefined ?\n        stateData.current.turnOnCameraWhenJoining :\n        (config.turnOnCameraWhenJoining));\n  const [turnOnMicrophoneWhenJoining, setTurnOnMicrophoneWhenJoining] = \n    useState(\n      stateData.current.turnOnMicrophoneWhenJoining !== undefined ?\n        stateData.current.turnOnMicrophoneWhenJoining :\n        (config.turnOnMicrophoneWhenJoining));\n  const [useSpeakerWhenJoining, setUseSpeakerWhenJoining] = \n    useState(\n      stateData.current.useSpeakerWhenJoining !== undefined ?\n        stateData.current.useSpeakerWhenJoining :\n        (config.useSpeakerWhenJoining));\n\n\n  const keyboardHeight = useKeyboard();\n  const [textInputVisable, setTextInputVisable] = useState(false);\n  const [textInput, setTextInput] = useState(null);\n  const [textInputHeight, setTextInputHeight] = useState(45);\n  const [role, setRole] = useState(stateData.current.role !== undefined ? stateData.current.role : config.role);\n  const [hostID, setHostID] = useState(stateData.current.hostID || '');\n  const [liveStatus, setLiveStatus] = useState(stateData.current.liveStatus !== undefined ? stateData.current.liveStatus : ''); // init: '' default: 0, start: 1\n  const [memberCount, setMemberCount] = useState(stateData.current.memberCount || 1);\n  const [isMemberListVisable, setIsMemberListVisable] = useState(stateData.current.isMemberListVisable || false);\n  const [isPluginsInit, setIsPluginsInit] = useState(false);\n  const [requestCoHostCount, setRequestCoHostCount] = useState(stateData.current.requestCoHostCount || 0);\n  const [memberConnectStateMap, setMemberConnectStateMap] = useState(stateData.current.memberConnectStateMap || {} as any); // The connection status of the current member\n  const [isCoHostDialogVisable, setIsCoHostDialogVisable] = useState(false);\n  const [coHostDialogExtendedData, setCoHostDialogExtendedData] = useState({} as any);\n  const [isToastVisable, setIsToastVisable] = useState(false);\n  const [toastExtendedData, setToastExtendedData] = useState({} as any);\n\n  PrebuiltHelper.getInstance().notifyZegoDialogTrigger(stateData.current.isDialogVisable || false);\n  const [dialogExtendedData, setDialogExtendedData] = useState(stateData.current.dialogExtendedData || {} as any);\n\n  const [duration, setDuration] = useState(stateData.current.duration || 0);\n\n  if (stateData.current.callbackID) {\n    stateData.current.callbackID  = 'ZegoUIKitPrebuiltLiveStreaming' +\n    String(Math.floor(Math.random() * 10000));\n  }\n  const callbackID = stateData.current.callbackID;\n\n  const hideCountdownOnToastLimit = 5;\n  const hideCountdownOnDialogLimit = 60;\n\n  let hideCountdownOnToast = hideCountdownOnToastLimit;\n\n  const hideCountdownOn_Dialog = useRef(hideCountdownOnDialogLimit);\n  const hideCountdownOn_DialogTimer = useRef(null);\n\n  const liveStreamingTiming = useRef(stateData.current.duration || 0);\n  const liveStreamingTimingTimer = useRef(stateData.current.liveStreamingTimingTimer || null);\n\n  const realTimeData = useRef(PrebuiltHelper.getInstance().getRealTimeData()); // Resolve the problem where closures cannot obtain new values, add as needed\n  if (!isMinimizeSwitch) {\n    realTimeData.current.role = config.role;\n  }\n\n  const isIgnore = useRef(false); // Resolved callback delay in receiving room attached message\n  const shouldSortHostAtFirst = useRef(true);\n  const debounce = useRef(false);\n\n  const isPageInBackground = () => {\n    const isMinimize = MinimizingHelper.getInstance().getIsMinimize();\n    console.log('######isPageInBackground', isMinimize);\n    return isMinimize;\n  }\n  const registerPluginCallback = () => {\n    if (ZegoUIKit.getPlugin(ZegoUIKitPluginType.signaling)) {\n      ZegoUIKit.getSignalingPlugin().onInvitationReceived(callbackID, ({ callID, type, inviter, data }: any) => {\n        console.log('[Prebuilt]onInvitationReceived', JSON.stringify(realTimeData.current), requestCoHostCount);\n        if (type === ZegoInvitationType.requestCoHost && userID === realTimeData.current.hostID) {\n          // The audience created a cohost request\n          realTimeData.current.requestCoHostCount += 1;\n          stateData.current.requestCoHostCount = realTimeData.current.requestCoHostCount;\n          setRequestCoHostCount(realTimeData.current.requestCoHostCount);\n\n          setIsToastVisable(true);\n          setToastExtendedData({ type: ZegoToastType.success, text: ZegoTranslationText.receivedRequestCoHostToast.replace('%0', inviter.id) });\n\n          realTimeData.current.memberConnectStateMap[inviter.id] = ZegoCoHostConnectState.connecting;\n          stateData.current.memberConnectStateMap[inviter.id] = ZegoCoHostConnectState.connecting;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n\n          setTimeout(() => {\n            // The sorting will not be triggered if the member list pop-up is not reopened, the sorting must be forced\n            ZegoUIKit.forceSortMemberList();\n          }, 50);\n        } else if (type === ZegoInvitationType.inviteToCoHost) {\n          // The audience is invited to connect the cohost by host\n          const temp = {\n            title: ZegoTranslationText.receivedCoHostInvitationDialogInfo.title,\n            content: ZegoTranslationText.receivedCoHostInvitationDialogInfo.message,\n            cancelText: ZegoTranslationText.receivedCoHostInvitationDialogInfo.cancelButtonName,\n            okText: ZegoTranslationText.receivedCoHostInvitationDialogInfo.confirmButtonName,\n            onCancel: () => {\n              // Refuse the cohost request of the host\n              ZegoUIKit.getSignalingPlugin().refuseInvitation(inviter.id).then(() => {\n                realTimeData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.idle;\n                stateData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.idle;\n                setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n\n                ZegoUIKit.turnCameraOn('', false);\n                ZegoUIKit.turnMicrophoneOn('', false);\n                setIsDialogVisableHandle(false);\n              });\n            },\n            onOk: () => {\n              // Accept the cohost request of the host\n              ZegoUIKit.getSignalingPlugin().acceptInvitation(inviter.id).then(async () => {\n                realTimeData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.connected;\n                stateData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.connected;\n                setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n                try {\n                  await grantPermissions();\n                } catch (error) {\n                }\n                ZegoUIKit.turnCameraOn('', true);\n                ZegoUIKit.turnMicrophoneOn('', true);\n                setIsDialogVisableHandle(false);\n\n                setRole(ZegoLiveStreamingRole.coHost);\n                realTimeData.current.role = ZegoLiveStreamingRole.coHost;\n                stateData.current.role = ZegoLiveStreamingRole.coHost;\n              });\n            }\n          }\n          setIsDialogVisableHandle(true);\n          setDialogExtendedData(temp);\n          stateData.current.dialogExtendedData = temp;\n        } else if (type == ZegoInvitationType.removeCoHost) {\n          // The audience was forced off the cohost by host\n          ZegoUIKit.turnCameraOn('', false);\n          ZegoUIKit.turnMicrophoneOn('', false);\n\n          realTimeData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.idle;\n          stateData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.idle;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n\n          setRole(ZegoLiveStreamingRole.audience);\n          realTimeData.current.role = ZegoLiveStreamingRole.audience;\n          stateData.current.role = ZegoLiveStreamingRole.audience;\n        }\n      });\n      ZegoUIKit.getSignalingPlugin().onInvitationCanceled(callbackID, ({ inviter }: any) => {\n        if (userID === realTimeData.current.hostID) {\n          // The audience canceled the cohost request\n          realTimeData.current.requestCoHostCount -= 1;\n          stateData.current.requestCoHostCount = realTimeData.current.requestCoHostCount;\n          setRequestCoHostCount(realTimeData.current.requestCoHostCount);\n\n          realTimeData.current.memberConnectStateMap[inviter.id] = ZegoCoHostConnectState.idle;\n          stateData.current.memberConnectStateMap[inviter.id] = ZegoCoHostConnectState.idle;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n        }\n      });\n      ZegoUIKit.getSignalingPlugin().onInvitationTimeout(callbackID, ({ inviter }: any) => {\n        if (userID === realTimeData.current.hostID) {\n          // The host did not process the cohost request, resulting in a timeout\n          realTimeData.current.requestCoHostCount -= 1;\n          stateData.current.requestCoHostCount = realTimeData.current.requestCoHostCount;\n          setRequestCoHostCount(realTimeData.current.requestCoHostCount);\n\n          realTimeData.current.memberConnectStateMap[inviter.id] = ZegoCoHostConnectState.idle;\n          stateData.current.memberConnectStateMap[inviter.id] = ZegoCoHostConnectState.idle;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n        }\n      });\n      ZegoUIKit.getSignalingPlugin().onInvitationAccepted(callbackID, ({ invitee }: any) => {\n        if (userID === realTimeData.current.hostID) {\n          // The audience accept the cohost request\n          realTimeData.current.memberConnectStateMap[invitee.id] = ZegoCoHostConnectState.connected;\n          stateData.current.memberConnectStateMap[invitee.id] = ZegoCoHostConnectState.connected;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n\n          // Reset invitation timer\n          setCoHostDialogExtendedData({ resetTimer: true, inviteeID: invitee.id});\n        }\n      });\n      ZegoUIKit.getSignalingPlugin().onInvitationRefused(callbackID, ({ invitee }: any) => {\n        if (userID === realTimeData.current.hostID) {\n          // The audience reject the cohost request\n          realTimeData.current.memberConnectStateMap[invitee.id] = ZegoCoHostConnectState.idle;\n          stateData.current.memberConnectStateMap[invitee.id] = ZegoCoHostConnectState.idle;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n\n          setIsToastVisable(true);\n          setToastExtendedData({ type: ZegoToastType.error, text: ZegoTranslationText.audienceRejectInvitationToast.replace('%0', invitee.id) });\n\n          // Reset invitation timer\n          setCoHostDialogExtendedData({ resetTimer: true, inviteeID: invitee.id });\n        }\n      });\n      ZegoUIKit.getSignalingPlugin().onInRoomTextMessageReceived(callbackID, (messageList: any[]) => {\n        console.warn('[Prebuilt]onInRoomTextMessageReceived', messageList);\n      });\n    }\n  };\n  const unRegisterPluginCallback = () => {\n    if (ZegoUIKit.getPlugin(ZegoUIKitPluginType.signaling)) {\n      ZegoUIKit.getSignalingPlugin().onInvitationReceived(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationCanceled(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationTimeout(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationAccepted(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInvitationRefused(callbackID);\n      ZegoUIKit.getSignalingPlugin().onInRoomTextMessageReceived(callbackID);\n    }\n  };\n\n  const initDialogTimer = () => {\n    clearInterval(hideCountdownOn_DialogTimer.current);\n    (hideCountdownOn_DialogTimer.current as any) = null;\n    (hideCountdownOn_Dialog.current as any) = hideCountdownOnDialogLimit;\n  }\n  const startDialogTimer = () => {\n    clearInterval(hideCountdownOn_DialogTimer.current);\n    (hideCountdownOn_DialogTimer.current as any) = setInterval(() => {\n      if (hideCountdownOn_Dialog.current === 0) {\n        setIsDialogVisableHandle(false);\n      } else {\n        (hideCountdownOn_Dialog.current as any) -= 1;\n      }\n    }, 1000);\n  }\n  const setIsDialogVisableHandle = (visable: boolean) => {\n    if (visable) {\n      startDialogTimer();\n    } else {\n      initDialogTimer();\n      setDialogExtendedData({});\n      stateData.current.dialogExtendedData = {};\n    }\n    PrebuiltHelper.getInstance().notifyZegoDialogTrigger(visable);\n    stateData.current.isDialogVisable = visable;\n  }\n  const startLiveStreamingTimingTimer = useCallback((restart = false) => {\n    console.log('######startLiveStreamingTimingTimer########');\n    if (!isVisible) return;\n    const temp = () => {\n      (liveStreamingTimingTimer.current as any) = setInterval(() => {\n        console.log('########liveStreamingTimingTimer timing', liveStreamingTiming.current); \n        (liveStreamingTiming.current as any) += 1;\n        setDuration(liveStreamingTiming.current);\n        stateData.current.duration = liveStreamingTiming.current;\n        typeof onDurationUpdate === 'function' && onDurationUpdate(liveStreamingTiming.current);\n      }, 1000);\n      stateData.current.liveStreamingTimingTimer = liveStreamingTimingTimer.current;\n    };\n    if (restart) {\n      console.log('########liveStreamingTimingTimer restart timing', liveStreamingTiming.current); \n      clearInterval(liveStreamingTimingTimer.current);\n      temp();\n    } else {\n      if (liveStreamingTimingTimer.current) {\n        // Avoid double timing\n        console.log('########liveStreamingTimingTimer double timing', liveStreamingTiming.current); \n      } else {\n        console.log('########startLiveStreamingTimingTimer');\n        initLiveStreamingTimingTimer();\n        temp();\n      }\n    }\n  }, []);\n  isMinimizeSwitch && startLiveStreamingTimingTimer(true);\n  \n  const initLiveStreamingTimingTimer = () => {\n    console.log('########initLiveStreamingTimingTimer');\n    clearInterval(liveStreamingTimingTimer.current);\n    (liveStreamingTimingTimer.current as any) = null;\n    (liveStreamingTiming.current as any) = 0;\n    setDuration(0);\n    stateData.current.duration = 0;\n    stateData.current.liveStreamingTimingTimer = null;\n  }\n\n  useImperativeHandle(ref, () => ({\n    leave: async (showConfirmation = false) => {\n      if (debounce.current) return;\n      if (!showConfirmation) {\n        (debounce.current as any) = true;\n        await tempHandle();\n        ZegoUIKit.leaveRoom();\n        typeof onLeaveLiveStreaming == 'function' && onLeaveLiveStreaming(liveStreamingTiming.current);\n        (debounce.current as any) = false;\n      } else {\n        (debounce.current as any) = true;\n        onLeaveLiveStreamingConfirmingWrap(onLeaveLiveStreamingConfirming).then(() => {\n          ZegoUIKit.leaveRoom();\n          typeof onLeaveLiveStreaming == 'function' && onLeaveLiveStreaming(liveStreamingTiming.current);\n          (debounce.current as any) = false;\n        });\n      }\n    },\n    minimizeWindow: () => {\n      MinimizingHelper.getInstance().minimizeWindow();\n    },\n  }));\n\n  useEffect(() => {\n    ZegoUIKit.onRoomStateChanged(callbackID, () => {\n      if (ZegoUIKit.isRoomConnected()) {\n        // Anchor set host\n        console.log('########onRoomStateChanged anchor set host', realTimeData.current);\n        if (realTimeData.current.role === ZegoLiveStreamingRole.host && !realTimeData.current.hostID) {\n          ZegoUIKit.updateRoomProperties({ host: userID, live_status: `${ZegoLiveStatus.default}` });\n          // Unequal results update the local value first\n          setHostID(userID);\n          realTimeData.current.hostID = userID;\n          stateData.current.hostID = userID;\n\n          // @ts-ignore\n          setLiveStatus(ZegoLiveStatus.default);\n          realTimeData.current.liveStatus = ZegoLiveStatus.default;\n          stateData.current.liveStatus = ZegoLiveStatus.default;\n          console.log('########onRoomStateChanged anchor set host end', realTimeData.current);\n        }\n      }\n    });\n    ZegoUIKit.onUserJoin(callbackID, () => {\n      const count = ZegoUIKit.getAllUsers().length;\n      stateData.current.memberCount = count;\n      setMemberCount(count);\n    });\n    ZegoUIKit.onUserLeave(callbackID, () => {\n      const count = ZegoUIKit.getAllUsers().length;\n      stateData.current.memberCount = count;\n      setMemberCount(count);\n    });\n    ZegoUIKit.onRoomPropertiesFullUpdated(callbackID, (keys: string[], oldRoomProperties: any, roomProperties: any, type: any) => {\n      console.log('########onRoomPropertiesFullUpdated', keys, oldRoomProperties, roomProperties, type);\n    });\n    ZegoUIKit.onRoomPropertyUpdated(callbackID, (key: string, oldValue: any, value: any, type: any) => {\n      console.log('########onRoomPropertyUpdated', key, oldValue, value, type);\n      // Resolved callback delay in receiving room attached message\n      if (realTimeData.current.role === ZegoLiveStreamingRole.host && type === ZegoRoomPropertyUpdateType.remote) {\n        // Set again, update uikit data\n        console.log('########Set again, update uikit data', userID, realTimeData.current.liveStatus);\n        (isIgnore.current as any) = true;\n        ZegoUIKit.updateRoomProperties({ host: userID, live_status: `${realTimeData.current.liveStatus}` });\n        return;\n      }\n      if (isIgnore.current) {\n        console.log('########onRoomPropertyUpdated ignore');\n        (isIgnore.current as any) = false;\n        return;\n      }\n      if (key === 'host') {\n        setHostID(value);\n        realTimeData.current.hostID = value;\n        stateData.current.hostID = value;\n      } else if (key === 'live_status') {\n        let temp = value ? parseInt(value) : '';\n        if (temp === ZegoLiveStatus.default) {\n          // The live_status is set to 0 before the host enters the room\n          console.log('########onRoomPropertyUpdated Update the reorder identity', true);\n          if (realTimeData.current.role !== ZegoLiveStreamingRole.host) {\n            // When the audience character receives the broadcast notification, stop pull all streams\n            // Uikit is also pulled by default, so you have to stop here as well\n            ZegoUIKit.stopPlayingAllAudioVideo();\n            if (oldValue === `${ZegoLiveStatus.start}`) {\n              // Hide the host's invitation to cohost dialog\n              setIsDialogVisableHandle(false);\n              initLiveStreamingTimingTimer();\n\n              // Cancel the invitation to cohost\n              ZegoUIKit.getSignalingPlugin().cancelInvitation([realTimeData.current.hostID]);\n              ZegoUIKit.turnCameraOn('', false);\n              ZegoUIKit.turnMicrophoneOn('', false);\n\n              // Update role and memberConnectStateMap\n              setRole(ZegoLiveStreamingRole.audience);\n              realTimeData.current.role = ZegoLiveStreamingRole.audience;\n              stateData.current.role = ZegoLiveStreamingRole.audience;\n        \n              realTimeData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.idle;\n              stateData.current.memberConnectStateMap[userID] = ZegoCoHostConnectState.idle;\n              setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n\n              typeof onLiveStreamingEnded === 'function' && onLiveStreamingEnded(liveStreamingTiming.current);\n            }\n          }\n        } else {\n          // The launch needs to be sorted, with the owner at the top of the list\n          (shouldSortHostAtFirst.current as any) = true;\n          ZegoUIKit.forceSortAudioVideoList();\n\n          ZegoUIKit.startPlayingAllAudioVideo();\n        }\n\n        // @ts-ignore\n        setLiveStatus(temp);\n        if (temp === ZegoLiveStatus.start) {\n          startLiveStreamingTimingTimer();\n        }\n        realTimeData.current.liveStatus = temp;\n        stateData.current.liveStatus = temp;\n      }\n    });\n    ZegoUIKit.onUserInfoUpdate(callbackID, (userInfo: any) => {\n      // This callback is executed before onAudioVideoAvailable and onAudioVideoUnavailable\n      const { userID, isMicDeviceOn, isCameraDeviceOn } = userInfo;\n      if (userID === realTimeData.current.hostID && !isMicDeviceOn && !isCameraDeviceOn) {\n        // Host turn off their cameras and microphones, cohost will fill in the bit, so it needs to be reordered next time\n        console.log('########onAudioVideoUnavailable Update the reorder identity', true);\n        (shouldSortHostAtFirst.current as any) = true;\n      }\n    });\n    ZegoUIKit.onAudioVideoAvailable(callbackID, (userList: any[]) => {\n      console.log('########onAudioVideoAvailable', userList);\n      userList.forEach((userInfo: any) => {\n        // Not in memberConnectStateMap but already connected\n        if (realTimeData.current.hostID !== userInfo.userID) {\n          realTimeData.current.memberConnectStateMap[userInfo.userID] = ZegoCoHostConnectState.connected;\n          stateData.current.memberConnectStateMap[userInfo.userID] = ZegoCoHostConnectState.connected;\n          setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n        }\n      });\n    });\n    ZegoUIKit.onAudioVideoUnavailable(callbackID, (userList: any[]) => {\n      userList.forEach((userInfo) => {\n        if (userInfo.userID === realTimeData.current.hostID) {\n          // Host turn off their cameras and microphones, cohost will fill in the bit, so it needs to be reordered next time\n          // Move to the onUserInfoUpdate callback for processing\n        } else {\n          if (userInfo.userID !== userID) {\n            realTimeData.current.memberConnectStateMap[userInfo.userID] = ZegoCoHostConnectState.idle;\n            stateData.current.memberConnectStateMap[userInfo.userID] = ZegoCoHostConnectState.idle;\n            setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n          } else {\n            // Do not deal with\n          }\n        }\n      })\n    });\n    ZegoUIKit.onTurnOnYourCameraRequest(callbackID, (formUser: any) => {\n      console.log('########onTurnOnYourCameraRequest', formUser);\n      onCameraTurnOnByOthersConfirmation && onCameraTurnOnByOthersConfirmation(formUser).then(async () => {\n        // Allow to open\n        try {\n          await grantPermissions();\n        } catch (error) {\n        }\n        ZegoUIKit.turnCameraOn('', true);\n      });\n    });\n    ZegoUIKit.onTurnOnYourMicrophoneRequest(callbackID, (formUser: any) => {\n      console.log('########onTurnOnYourMicrophoneRequest', formUser);\n      onMicrophoneTurnOnByOthersConfirmation && onMicrophoneTurnOnByOthersConfirmation(formUser).then(async () => {\n        // Allow to open\n        try {\n          await grantPermissions();\n        } catch (error) {\n        }\n        ZegoUIKit.turnMicrophoneOn('', true);\n      });\n    });\n    ZegoUIKit.onMeRemovedFromRoom(callbackID, () => {\n      typeof onLeaveLiveStreaming == 'function' && onLeaveLiveStreaming(liveStreamingTiming.current);\n    });\n    ZegoUIKit.onInRoomCommandReceived(callbackID, (fromUser: any, command: any) => {\n      console.warn('[Prebuilt]onInRoomCommandReceived', fromUser, command);\n    });\n    ZegoUIKit.onMicrophoneOn(callbackID, (targetUserID: string, isOn: boolean) => {\n      if (targetUserID === userID) {\n        console.log('onMicrophoneOn', targetUserID, isOn);\n        stateData.current.turnOnMicrophoneWhenJoining = !!isOn;\n      }\n    });\n    ZegoUIKit.onCameraOn(callbackID, (targetUserID: string, isOn: boolean) => {\n      if (targetUserID === userID) {\n        console.log('onCameraOn', targetUserID, isOn);\n        stateData.current.turnOnCameraWhenJoining = !!isOn;\n      }\n    });\n    ZegoUIKit.onAudioOutputDeviceChanged(callbackID, (type: number) => {\n      console.log('onAudioOutputDeviceChanged', type);\n      stateData.current.useSpeakerWhenJoining = (type === 0);\n    });\n    MinimizingHelper.getInstance().onWindowMinimized(callbackID, () => {\n      // Hidden input box\n      setTextInputVisable(false);\n\n      // Hide toast\n      hideCountdownOnToast = hideCountdownOnToastLimit;\n      setIsToastVisable(false);\n\n      // Hide the invitation and remove box at the bottom\n      setIsCoHostDialogVisable(false);\n      setCoHostDialogExtendedData({});\n    });\n    \n    // Initialize after use\n    MinimizingHelper.getInstance().setIsMinimizeSwitch(false);\n    return () => {\n      const isMinimizeSwitch = MinimizingHelper.getInstance().getIsMinimizeSwitch();\n      if (!isMinimizeSwitch) {\n        ZegoUIKit.onRoomStateChanged(callbackID);\n        ZegoUIKit.onUserJoin(callbackID);\n        ZegoUIKit.onUserLeave(callbackID);\n        ZegoUIKit.onRoomPropertiesFullUpdated(callbackID);\n        ZegoUIKit.onRoomPropertyUpdated(callbackID);\n        ZegoUIKit.onUserInfoUpdate(callbackID);\n        ZegoUIKit.onAudioVideoAvailable(callbackID);\n        ZegoUIKit.onAudioVideoUnavailable(callbackID);\n        ZegoUIKit.onTurnOnYourCameraRequest(callbackID);\n        ZegoUIKit.onTurnOnYourMicrophoneRequest(callbackID);\n        ZegoUIKit.onMeRemovedFromRoom(callbackID);\n        ZegoUIKit.onInRoomCommandReceived(callbackID);\n\n        PrebuiltHelper.getInstance().clearRealTimeData();\n        PrebuiltHelper.getInstance().clearState();\n        PrebuiltHelper.getInstance().clearNotify();\n      }\n    };\n  }, []);\n  useEffect(() => {\n    ZegoPrebuiltPlugins.init(appID, appSign, userID, userName, plugins).then((result: boolean) => {\n      setIsPluginsInit(result);\n      MinimizingHelper.getInstance().notifyPrebuiltInit();\n      // Register plugin callback\n      registerPluginCallback();\n      ZegoPrebuiltPlugins.joinRoom(liveID).then((result: boolean) => {\n        if (result) {\n          zloginfo('[ZegoUIKitPrebuiltLiveStreaming] join room success.');\n        }\n      });\n      ZegoUIKit.init(appID, appSign, { userID: userID, userName: userName }).then(\n        () => {\n          ZegoUIKit.turnCameraOn('', turnOnCameraWhenJoining);\n          ZegoUIKit.turnMicrophoneOn('', turnOnMicrophoneWhenJoining);\n          ZegoUIKit.setAudioOutputToSpeaker(useSpeakerWhenJoining);\n\n          if (config.role === ZegoLiveStreamingRole.host) {\n            grantPermissions(() => {\n              ZegoUIKit.joinRoom(liveID, '', !!markAsLargeRoom);\n            });\n          } else {\n            ZegoUIKit.joinRoom(liveID, '', !!markAsLargeRoom);\n          }\n        }\n      );\n    });\n    // Initialize after use\n    MinimizingHelper.getInstance().setIsMinimizeSwitch(false);\n    return () => {\n      const isMinimizeSwitch = MinimizingHelper.getInstance().getIsMinimizeSwitch();\n      if (!isMinimizeSwitch) {\n        setIsDialogVisableHandle(false);\n        initLiveStreamingTimingTimer();\n        ZegoUIKit.leaveRoom();\n        unRegisterPluginCallback();\n        ZegoPrebuiltPlugins.uninit();\n\n        PrebuiltHelper.getInstance().clearRealTimeData();\n        PrebuiltHelper.getInstance().clearState();\n        PrebuiltHelper.getInstance().clearNotify();\n      }\n    };\n  }, []);\n\n  const showAudioVideoContainer = () => {\n    // @ts-ignore\n    return role === ZegoLiveStreamingRole.host || role !== ZegoLiveStreamingRole.host && liveStatus === ZegoLiveStatus.start;\n  };\n  const showStartLiveButton = () => {\n    // @ts-ignore\n    return role === ZegoLiveStreamingRole.host && hostID && hostID === userID && liveStatus === ZegoLiveStatus.default;\n  };\n  const showBottomBar = () => {\n    // @ts-ignore\n    return role === ZegoLiveStreamingRole.host && hostID && hostID === userID && liveStatus === ZegoLiveStatus.start ||\n    role === ZegoLiveStreamingRole.audience || role === ZegoLiveStreamingRole.coHost;\n  }\n  const showMessageListView = () => {\n    // @ts-ignore\n    return role === ZegoLiveStreamingRole.host && liveStatus === ZegoLiveStatus.start || role !== ZegoLiveStreamingRole.host;\n  }\n  const onFullPageTouch = () => {\n    console.log('####onFullPageTouch####');\n    hideCountdownOnToast = hideCountdownOnToastLimit;\n    setIsToastVisable(false);\n    setTextInputVisable(false);\n    setIsMemberListVisable(false);\n    setIsCoHostDialogVisable(false);\n    setCoHostDialogExtendedData({});\n    setTextInputHeight(45); // It needs to be reinitialized, otherwise the height will be wrong\n\n    stateData.current.isMemberListVisable = false;\n  };\n  const useInterval = (callback: Function, delay: number) => {\n    const savedCallback = useRef();\n    useEffect(() => {\n      (savedCallback.current as any) = callback;\n    }, []);\n    useEffect(() => {\n      function tick() {\n        (savedCallback.current as any)();\n      }\n      if (delay !== null) {\n        const id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    }, [delay]);\n  }\n  // Close toast on time\n  useInterval(() => {\n    hideCountdownOnToast--;\n    if (hideCountdownOnToast <= 0) {\n      hideCountdownOnToast = hideCountdownOnToastLimit;\n      setIsToastVisable(false);\n      setToastExtendedData({});\n    }\n  }, 1000);\n  const getHostNameByID = (hostID: string) => {\n    const userInfo = ZegoUIKit.getUser(hostID) || { };\n    const hostName = userInfo.userName || '';\n    return hostName;\n  };\n  const onMemberButtonPressed = () => {\n    setTextInputVisable(false);\n    setIsMemberListVisable(true);\n    stateData.current.isMemberListVisable = true;\n  };\n  const onNavBackPressed = () => {\n    const leaveHandle = async () => {\n      // Leave the room\n      ZegoUIKit.leaveRoom();\n      typeof onLeaveLiveStreaming == 'function' && onLeaveLiveStreaming(liveStreamingTiming.current);\n    }\n    const temp = onLeaveLiveStreamingConfirmingWrap(onLeaveLiveStreamingConfirming);\n    if (temp) {\n      temp.then(() => {\n        leaveHandle();\n      })\n    } else {\n      // Reserve cases that do not require confirmation\n      leaveHandle();\n    }\n  };\n  const sortAudioVideo = (globalAudioVideoUserList: any[]) => {\n    console.log('########sortAudioVideo', globalAudioVideoUserList, realTimeData.current.hostID, shouldSortHostAtFirst.current);\n    const index = globalAudioVideoUserList.findIndex((userInfo) => userInfo.userID === realTimeData.current.hostID);\n    if (shouldSortHostAtFirst.current && index !== -1) {\n      // Put host first\n      const temp = globalAudioVideoUserList.splice(index, 1)[0];\n      globalAudioVideoUserList.unshift(temp);\n      // You don't have to deal with the sorting once, because the addition to the internal stream is also added to the end of the queue\n      console.log('########sortAudioVideo Sort completion and update the reorder identity', false);\n      (shouldSortHostAtFirst.current as any) = false;\n    }\n    return globalAudioVideoUserList;\n  };\n  const onStartLiveStreaming = () => {\n    // After the host enters the room and sets the room properties successfully\n    // The host receives the callback of the additional message of the room\n    // You must also set the property host, otherwise host will be null\n    ZegoUIKit.updateRoomProperties({ host: hostID, live_status: `${ZegoLiveStatus.start}` }).then(() => {\n      typeof onStartLiveButtonPressed === 'function' && onStartLiveButtonPressed();\n    });\n  };\n  const showDefaultLeaveDialog = () => {\n    return new Promise<void>((resolve, reject) => {\n      if (!confirmDialogInfo) {\n        resolve();\n      } else {\n        const {\n          title = \"Leave the live streaming\",\n          message = \"Are you sure to leave the live streaming?\",\n          cancelButtonName = \"Cancel\",\n          confirmButtonName = \"Confirm\"\n        } = confirmDialogInfo;\n        Alert.alert(\n          title,\n          message,\n          [\n            {\n              text: cancelButtonName,\n              onPress: () => reject(),\n              style: \"cancel\"\n            },\n            {\n              text: confirmButtonName,\n              onPress: () => resolve()\n            }\n          ]\n        );\n      }\n    })\n  };\n  const tempHandle = async () => {\n    // Intercept confirm \n    if (role === ZegoLiveStreamingRole.host) {\n      // @ts-ignore\n      if (liveStatus === ZegoLiveStatus.start) {\n        // Clear room properties\n        await ZegoUIKit.updateRoomProperties({ live_status: `${ZegoLiveStatus.default}`, host: '' });\n        typeof onLiveStreamingEnded === 'function' && onLiveStreamingEnded(liveStreamingTiming.current);\n      } else {\n        // Clear room properties\n        await ZegoUIKit.updateRoomProperties({ live_status: `${ZegoLiveStatus.default}`, host: '' });\n      }\n    } else if (role === ZegoLiveStreamingRole.coHost) {\n\n    } else {\n      \n    }\n  }\n  const onLeaveLiveStreamingConfirmingWrap = (onLeaveLiveStreamingConfirming: any) => {\n    const temp = onLeaveLiveStreamingConfirming || showDefaultLeaveDialog;\n    return new Promise<void>((resolve, reject) => {\n      temp().then(async () => {\n        await tempHandle();\n        resolve();\n      }).catch(() => {\n        // Intercept confirm cancel\n        reject();\n      });\n    });\n  };\n  const connectStateChangedHandle = (changedUserID: string, connectState: number, isClosure: boolean) => {\n    console.log('#########connectStateChangedHandle', changedUserID, connectState, memberConnectStateMap, realTimeData.current.memberConnectStateMap);\n    // The audience connection status changes\n    changedUserID = changedUserID || userID;\n    const temp = connectState === ZegoCoHostConnectState.connected ? ZegoLiveStreamingRole.coHost : ZegoLiveStreamingRole.audience;\n    if (!isClosure) {\n      // Just take the value in state, because there's no closure\n      memberConnectStateMap[changedUserID] = connectState;\n      // Rerendering causes realTimeData.current to be empty, so a reassignment is required here\n      role !== ZegoLiveStreamingRole.host && (realTimeData.current.role = temp, stateData.current.role = temp);\n      realTimeData.current.memberConnectStateMap = { ...memberConnectStateMap };\n      stateData.current.memberConnectStateMap = { ...memberConnectStateMap };\n\n      role !== ZegoLiveStreamingRole.host && setRole(temp);\n      setMemberConnectStateMap({ ...memberConnectStateMap });\n    } else {\n      // There are closures, status values cannot be used directly\n      realTimeData.current.memberConnectStateMap[changedUserID] = connectState;\n      stateData.current.memberConnectStateMap[changedUserID] = connectState;\n      setMemberConnectStateMap({ ...realTimeData.current.memberConnectStateMap });\n      if (realTimeData.current.role !== ZegoLiveStreamingRole.host) {\n        setRole(temp);\n        realTimeData.current.role = temp;\n        stateData.current.role = temp;\n      }\n    }\n  };\n  const coHostDisagreeHandle = (changedUserID: string) => {\n    // Just take the value in state, because there's no closure\n    memberConnectStateMap[changedUserID] = ZegoCoHostConnectState.idle;\n\n    // Rerendering causes realTimeData.current to be empty, so a reassignment is required here\n    realTimeData.current.requestCoHostCount = requestCoHostCount - 1;\n    stateData.current.requestCoHostCount = realTimeData.current.requestCoHostCount;\n    realTimeData.current.memberConnectStateMap = { ...memberConnectStateMap };\n    stateData.current.memberConnectStateMap = { ...memberConnectStateMap };\n\n    setMemberConnectStateMap({ ...memberConnectStateMap });\n    setRequestCoHostCount(requestCoHostCount - 1);\n  };\n  const coHostAgreeHandle = (changedUserID: string) => {\n    // Just take the value in state, because there's no closure\n    memberConnectStateMap[changedUserID] = ZegoCoHostConnectState.connected;\n  \n    realTimeData.current.requestCoHostCount = requestCoHostCount - 1;\n    stateData.current.requestCoHostCount = realTimeData.current.requestCoHostCount;\n    realTimeData.current.memberConnectStateMap = { ...memberConnectStateMap };\n    stateData.current.memberConnectStateMap = { ...memberConnectStateMap };\n\n    setMemberConnectStateMap({ ...memberConnectStateMap });\n    setRequestCoHostCount(requestCoHostCount - 1);\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* Main frame or background */}\n      <View style={styles.fillParent}>\n        {/* I have to render it first, otherwise I won't get the callbacks */}\n        <ZegoAudioVideoContainer\n          audioVideoConfig={{\n            showSoundWavesInAudioMode: showSoundWavesInAudioMode,\n            useVideoViewAspectFill: useVideoViewAspectFill,\n            cacheAudioVideoUserList: isMinimizeSwitch ?\n              ZegoUIKit.getAllUsers().filter(user => user.userID && (user.isCameraOn || user.isMicrophoneOn)) :\n              null\n          }}\n          layout={{mode: ZegoLayoutMode.pictureInPicture, removeViewWhenAudioVideoUnavailable: true}}\n          sortAudioVideo={sortAudioVideo}\n          foregroundBuilder={foregroundBuilder || (({ userInfo }: any) => <ZegoAudioVideoForegroundView\n            role={role}\n            userInfo={userInfo}\n            localUserID={userID}\n            turnOnCameraWhenJoining={turnOnCameraWhenJoining}\n            turnOnMicrophoneWhenJoining={turnOnMicrophoneWhenJoining}\n            showUserNameOnView={true}\n            showCameraStateOnView={false}\n            showMicrophoneStateOnView={true}\n          />) }\n        />\n        <View style={[styles.fillParent, {zIndex: showAudioVideoContainer() ? -1 : 1}]}>\n          <ImageBackground\n            style={styles.noHostBg}\n            source={require('./resources/background.png')}\n          >\n            <Text style={styles.noHostTips}>{ZegoTranslationText.noHostOnline}</Text>\n          </ImageBackground>\n        </View>\n      </View>\n      {/* Top bar */}\n      <View style={styles.topBarContainer}>\n        <View style={styles.left}>\n          {/* @ts-ignore */}\n          <View style={[styles.hostInfo, (role === ZegoLiveStreamingRole.host && hostID && liveStatus === ZegoLiveStatus.start) || (role !== ZegoLiveStreamingRole.host && hostID) ? styles.show : null]}>\n            <View style={styles.avatar}>\n              <Text style={styles.nameLabel}>\n                {getShotName(getHostNameByID(hostID))}\n              </Text>\n            </View>\n            <Text style={styles.hostName}>{getHostNameByID(hostID)}</Text>\n          </View>\n          {/* Return home */}\n          {/* @ts-ignore */}\n          <TouchableOpacity onPress={onNavBackPressed} style={[styles.navBackButton, (role === ZegoLiveStreamingRole.host && hostID && liveStatus !== ZegoLiveStatus.start) ? styles.show : null]}>\n            <Image resizeMode='contain' source={require('./resources/icon_nav_back.png')} />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.right}>\n          {\n            // @ts-ignore\n            role === ZegoLiveStreamingRole.host && liveStatus === ZegoLiveStatus.start || role !== ZegoLiveStreamingRole.host ? <TouchableOpacity onPress={onMemberButtonPressed}>\n              <View style={styles.memberButton}>\n                <Image source={require('./resources/white_top_button_member.png')} />\n                <Text style={styles.memberCountLabel}>{memberCount}</Text>\n                { requestCoHostCount ? <View style={styles.memberRedDot}></View> : null }\n              </View>\n            </TouchableOpacity> : null\n          }\n          {\n            // @ts-ignore\n            role === ZegoLiveStreamingRole.host && liveStatus === ZegoLiveStatus.start || role !== ZegoLiveStreamingRole.host ? <ZegoTopBar\n              menuBarButtons={buttons}\n              onLeave={() => {\n                onLeaveLiveStreaming(liveStreamingTiming.current);\n              }}\n              onLeaveConfirmation={onLeaveLiveStreamingConfirmingWrap.bind(this, onLeaveLiveStreamingConfirming)}\n            /> : null\n          }\n          {\n            // @ts-ignore\n            role === ZegoLiveStreamingRole.host && hostID && hostID === userID && (liveStatus === ZegoLiveStatus.default || liveStatus === ZegoLiveStatus.default) ? <View style={styles.switchCameraButton}>\n              <ZegoSwitchCameraButton\n                iconFrontFacingCamera={require('./resources/icon_nav_flip.png')}\n                iconBackFacingCamera={require('./resources/icon_nav_flip.png')}\n                width={36}\n                height={36}\n              />\n            </View> : null\n          }\n        </View>\n      </View>\n      {/* Start live button */}\n      {\n        showStartLiveButton() ? <View style={styles.startLiveButtonCon}>\n          {\n            startLiveButtonBuilder ? startLiveButtonBuilder(onStartLiveStreaming) : <ZegoStartLiveButton onPressed={onStartLiveStreaming} />\n          }\n        </View> : null\n      }\n      {/* Timing */}\n      {\n        // @ts-ignore\n        isVisible && liveStatus === ZegoLiveStatus.start ? <SafeAreaView style={styles.timingContainer}>\n          <Text style={styles.timing}>{durationFormat(duration)}</Text>\n        </SafeAreaView> : null\n      }\n      {/* Message list */}\n      {\n        showMessageListView() ? <View style={styles.messageListView}>\n          <ZegoInRoomMessageView itemBuilder={messageItemBuilder} style={styles.fillParent} />\n        </View> : null\n      }\n      {/* Member list */}\n      {\n        isMemberListVisable ?\n          <ZegoLiveStreamingMemberList\n            isPluginsInit={isPluginsInit}\n            showMicrophoneState={showMicrophoneState}\n            showCameraState={showCameraState}\n            itemBuilder={itemBuilder}\n            onCloseMemberList={() => {\n              setIsMemberListVisable(false);\n              stateData.current.isMemberListVisable = false;\n            }}\n            hostID={hostID}\n            memberCount={memberCount}\n            memberConnectStateMap={memberConnectStateMap}\n            onCoHostDisagree={coHostDisagreeHandle}\n            onCoHostAgree={coHostAgreeHandle}\n            onConnectStateChanged={connectStateChangedHandle}\n            setIsToastVisable={(visable: boolean) => setIsToastVisable(visable)}\n            setToastExtendedData={(toastExtendedData: any) => setToastExtendedData(toastExtendedData)}\n            setIsCoHostDialogVisable={(visable: boolean) => setIsCoHostDialogVisable(visable)}\n            setCoHostDialogExtendedData={(coHostDialogExtendedData: any) => setCoHostDialogExtendedData(coHostDialogExtendedData)}\n          /> : null\n      }\n      {/* Cohost dialog */}\n      <ZegoCoHostMenuDialog\n        visable={isCoHostDialogVisable}\n        inviteeID={coHostDialogExtendedData.inviteeID}\n        invitationType={coHostDialogExtendedData.invitationType}\n        onCancel={coHostDialogExtendedData.onCancel}\n        onOk={coHostDialogExtendedData.onOk}\n        setIsToastVisable={(visable: boolean) => setIsToastVisable(visable)}\n        setToastExtendedData={(toastExtendedData: any) => setToastExtendedData(toastExtendedData)}\n        resetTimer={coHostDialogExtendedData.resetTimer}\n      />\n      {/* Common toast */}\n      <ZegoToast\n        visable={isToastVisable}\n        text={toastExtendedData.text}\n        type={toastExtendedData.type}\n      />\n      <ZegoDialog\n        title={dialogExtendedData.title}\n        content={dialogExtendedData.content}\n        cancelText={dialogExtendedData.cancelText}\n        okText={dialogExtendedData.okText}\n        onCancel={dialogExtendedData.onCancel}\n        onOk={dialogExtendedData.onOk}\n      />\n      {/* Click in full screen to collapse the input box */}\n      <View\n        pointerEvents=\"auto\"\n        onTouchStart={onFullPageTouch}\n        style={[\n          styles.dismissArea,\n          {\n            bottom:\n              (Platform.OS == 'ios'\n                ? keyboardHeight + textInputHeight\n                : textInputHeight) + 40,\n          },\n        ]}\n      />\n      {/* Bottom bar */}\n      {\n        showBottomBar() ? <KeyboardAvoidingView\n            style={[styles.fillParent, { zIndex: 9 }]}\n            behavior={'padding'}\n          >\n            {Platform.OS != 'ios' && keyboardHeight > 0 ? null : (\n              <ZegoBottomBar\n                menuBarButtonsMaxCount={maxCount}\n                menuBarButtons={\n                  role === ZegoLiveStreamingRole.host ?\n                  hostButtons :\n                    role === ZegoLiveStreamingRole.audience ?\n                    audienceButtons :\n                      role === ZegoLiveStreamingRole.coHost ? \n                      coHostButtons : []\n                }\n                menuBarExtendedButtons={\n                  role === ZegoLiveStreamingRole.host ?\n                  hostExtendButtons :\n                    role === ZegoLiveStreamingRole.audience ?\n                    audienceExtendButtons :\n                      role === ZegoLiveStreamingRole.coHost ? \n                      coHostExtendButtons : []\n                }\n                turnOnCameraWhenJoining={turnOnCameraWhenJoining}\n                turnOnMicrophoneWhenJoining={turnOnMicrophoneWhenJoining}\n                useSpeakerWhenJoining={useSpeakerWhenJoining}\n                showInRoomMessageButton={showInRoomMessageButton}\n                onLeaveLiveStreaming={() => {\n                  onLeaveLiveStreaming(liveStreamingTiming.current);\n                }}\n                // @ts-ignore\n                onLeaveLiveStreamingConfirming={onLeaveLiveStreamingConfirmingWrap.bind(this, onLeaveLiveStreamingConfirming)}\n                onMessageButtonPress={() => { setTextInputVisable(true) }}\n                onConnectStateChanged={connectStateChangedHandle}\n                setIsToastVisable={(visable: boolean) => setIsToastVisable(visable)}\n                setToastExtendedData={(toastExtendedData: any) => setToastExtendedData(toastExtendedData)}\n                setIsDialogVisable={setIsDialogVisableHandle}\n                setDialogExtendedData={(dialogExtendedData: any) => {\n                  setDialogExtendedData(dialogExtendedData);\n                  stateData.current.dialogExtendedData = dialogExtendedData;\n                }}\n                isPluginsInit={isPluginsInit}\n                userID={userID}\n                hostID={hostID}\n                liveStatus={liveStatus}\n                memberConnectState={memberConnectStateMap[userID]}\n              />\n            )}\n            {textInputVisable ? (\n              <View\n                style={[\n                  styles.messageInputPannel,\n                  {\n                    bottom: Platform.OS == 'ios' ? keyboardHeight : 0,\n                    height: textInputHeight,\n                  },\n                ]}\n              >\n                <ZegoInRoomMessageInput\n                  ref={(input: any) => {\n                    setTextInput(input);\n                  }}\n                  // @ts-ignore\n                  onContentSizeChange={(height: number) => {\n                    // setTextInputHeight(height);\n                  }}\n                  placeholder={'Say something...'}\n                  onSumit={() => {\n                    setTextInputVisable(false);\n                  }}\n                />\n              </View>\n            ) : null}\n        </KeyboardAvoidingView> : null\n      }\n    </View>\n  );\n}\n\nexport default forwardRef(ZegoUIKitPrebuiltLiveStreaming);\n\nconst styles = StyleSheet.create({\n  messageListView: {\n    position: 'absolute',\n    left: 16,\n    bottom: 80,\n    width: 270,\n    maxHeight: 200,\n    zIndex: 12,\n  },\n  messageInputPannel: {\n    position: 'absolute',\n    borderTopLeftRadius: 12,\n    borderTopRightRadius: 12,\n    backgroundColor: 'rgba(0, 0, 0, 0.7500)',\n    width: '100%',\n    zIndex: 11,\n  },\n  container: {\n    flex: 1,\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 0,\n  },\n  fillParent: {\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n  },\n  topBarContainer: {\n    position: 'absolute',\n    top: 32,\n    zIndex: 10,\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '100%',\n    justifyContent: 'space-between',\n    paddingTop: 3,\n    paddingBottom: 3,\n  },\n  left: {\n    flexDirection: 'row',\n    alignItems: \"center\",\n  },\n  right: {\n    flexDirection: 'row',\n    alignItems: \"center\",\n  },\n  hostInfo: {\n    flexDirection: 'row',\n    backgroundColor: 'rgba(30, 39, 64, 0.4)',\n    borderRadius: 1000,\n    paddingLeft: 3,\n    paddingRight: 12,\n    paddingTop: 3,\n    paddingBottom: 3,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 16,\n    display: 'none',\n  },\n  show: {\n    display: 'flex',\n  },\n  avatar: {\n    backgroundColor: '#ffffff',\n    borderRadius: 1000,\n    width: 28,\n    height: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 6,\n    marginLeft: 3,\n  },\n  nameLabel: {\n    fontSize: 18,\n    color: '#2A2A2A',\n  },\n  hostName: {\n    color: '#FFFFFF',\n    fontSize: 14,\n  },\n  navBackButton: {\n    marginLeft: 20,\n    display: 'none',\n    paddingLeft: 6,\n    paddingRight: 6,\n    paddingTop: 6,\n    paddingBottom: 6,\n  },\n  leaveButton: {\n    marginRight: 10,\n  },\n  switchCameraButton: {\n    marginRight: 16,\n  },\n  memberButton: {\n    width: 53,\n    height: 28,\n    backgroundColor: 'rgba(30, 39, 64, 0.4000)',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 17,\n    marginRight: 2,\n  },\n  memberCountLabel: {\n    fontSize: 14,\n    color: 'white',\n    marginLeft: 3,\n  },\n  memberRedDot: {\n    backgroundColor: '#FF0D23',\n    borderRadius: 1000,\n    width: 8,\n    height: 8,\n    position: 'absolute',\n    right: 0,\n    top: 0,\n  },\n  startLiveButtonCon: {\n    position: 'absolute',\n    width: '100%',\n    zIndex: 12,\n    bottom: 48.5,\n    alignItems: 'center',\n  },\n  dismissArea: {\n    zIndex: 11,\n    width: '100%',\n    top: 80,\n    position: 'absolute',\n  },\n  noHostBg: {\n    flex: 1,\n    resizeMode: 'cover',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  noHostTips: {\n    width: 330,\n    height: 90,\n    fontSize: 14,\n    lineHeight: 45,\n    color: 'white',\n    textAlign: 'center',\n  },\n  timingContainer: {\n    position: 'absolute',\n    top: 6,\n    zIndex: 11,\n  },\n  timing: {\n    color: 'white',\n  }\n});\n"],"mappings":"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"}