{"version":3,"names":["ZegoPluginInvitationService","ZegoUIKitPluginType","ZegoPluginRoomPropertiesService","ZegoPluginUserInRoomAttributesService","ZegoUIKitSignalingPlugin","constructor","_defineProperty","signaling","shared","getInstance","getVersion","then","zimVersion","getZIMInstance","getPluginType","_signaling","setBackgroundMessageHandler","setAndroidOfflineDataHandler","handler","setIOSOfflineDataHandler","onCallKitAnswerCall","onCallKitEndCall","reportCallKitCallEnded","uuid","reason","queryCallList","count","nextFlag","invoke","method","params","init","appID","appSign","uninit","login","userID","userName","enableNotifyWhenAppRunningInBackgroundOrQuit","enable","isIOSDevelopmentEnvironment","appName","logout","sendInvitation","inviterName","invitees","timeout","type","data","notificationConfig","cancelInvitation","refuseInvitation","inviterID","acceptInvitation","joinRoom","roomID","leaveRoom","setUsersInRoomAttributes","key","value","userIDs","queryUsersInRoomAttributes","updateRoomProperty","isDeleteAfterOwnerLeft","isForce","isUpdateOwner","deleteRoomProperties","keys","beginRoomPropertiesBatchOperation","endRoomPropertiesBatchOperation","queryRoomProperties","Promise","reject","registerPluginEventHandler","event","callbackID","callback","onConnectionStateChanged","onCallInvitationReceived","onCallInvitationTimeout","onCallInviteesAnsweredTimeout","onCallInvitationAccepted","onCallInvitationRejected","onCallInvitationCancelled","onUsersInRoomAttributesUpdated","onRoomPropertyUpdated","onInRoomTextMessageReceived","_class"],"sources":["index.ts"],"sourcesContent":["import ZegoPluginInvitationService from './services';\nimport { ZegoUIKitPluginType } from './defines';\nimport ZegoPluginRoomPropertiesService from './services/room_properties_service';\nimport ZegoPluginUserInRoomAttributesService from './services/user_in_room_attributes_service';\nimport type { CXAction } from 'zego-zpns-react-native';\n\nexport default class ZegoUIKitSignalingPlugin {\n  static shared: ZegoUIKitSignalingPlugin;\n  _signaling = ZegoUIKitPluginType.signaling;\n  constructor() {\n    if (!ZegoUIKitSignalingPlugin.shared) {\n      ZegoUIKitSignalingPlugin.shared = this;\n    }\n    return ZegoUIKitSignalingPlugin.shared;\n  }\n  static getInstance() {\n    if (!ZegoUIKitSignalingPlugin.shared) {\n      ZegoUIKitSignalingPlugin.shared = new ZegoUIKitSignalingPlugin();\n    }\n    return ZegoUIKitSignalingPlugin.shared;\n  }\n  static getVersion() {\n    return ZegoPluginInvitationService.getInstance()\n      .getVersion()\n      .then((zimVersion) => {\n        return `signaling_plugin:1.0.0;zim:${zimVersion}`;\n      });\n  }\n  getZIMInstance() {\n    return ZegoPluginInvitationService.getInstance().getZIMInstance();\n  }\n  getPluginType() {\n    return this._signaling;\n  }\n  setBackgroundMessageHandler() {\n    ZegoPluginInvitationService.getInstance().setBackgroundMessageHandler();\n  }\n  setAndroidOfflineDataHandler(handler: (data: any) => void) {\n    ZegoPluginInvitationService.getInstance().setAndroidOfflineDataHandler(handler);\n  }\n  setIOSOfflineDataHandler(handler: (data: any, uuid: string) => void) {\n    ZegoPluginInvitationService.getInstance().setIOSOfflineDataHandler(handler);\n  }\n  onCallKitAnswerCall(handler: (action: CXAction) => void) {\n    ZegoPluginInvitationService.getInstance().onCallKitAnswerCall(handler);\n  }\n  onCallKitEndCall(handler: (action: CXAction) => void) {\n    ZegoPluginInvitationService.getInstance().onCallKitEndCall(handler);\n  }\n  reportCallKitCallEnded(uuid: string, reason: number) {\n    ZegoPluginInvitationService.getInstance().reportCallKitCallEnded(uuid, reason);\n  }\n  queryCallList(count: number, nextFlag?: number) {\n    return ZegoPluginInvitationService.getInstance().queryCallList(count, nextFlag);\n  }\n  invoke(method: string, params?: any) {\n    switch (method) {\n      case 'init':\n        return ZegoPluginInvitationService.getInstance().init(\n          params.appID,\n          params.appSign\n        );\n      case 'uninit':\n        return ZegoPluginInvitationService.getInstance().uninit();\n      case 'login':\n        return ZegoPluginInvitationService.getInstance().login(\n          params.userID,\n          params.userName\n        );\n      case 'enableNotifyWhenAppRunningInBackgroundOrQuit':\n        return ZegoPluginInvitationService.getInstance().enableNotifyWhenAppRunningInBackgroundOrQuit(params.enable, params.isIOSDevelopmentEnvironment, params.appName)\n      case 'logout':\n        return ZegoPluginInvitationService.getInstance().logout();\n      case 'sendInvitation':\n        return ZegoPluginInvitationService.getInstance().sendInvitation(\n          params.inviterName,\n          params.invitees,\n          params.timeout,\n          params.type,\n          params.data,\n          params.notificationConfig,\n        );\n      case 'cancelInvitation':\n        return ZegoPluginInvitationService.getInstance().cancelInvitation(\n          params.invitees,\n          params.data\n        );\n      case 'reportCallKitCallEnded':\n        return ZegoPluginInvitationService.getInstance().reportCallKitCallEnded(\n          params.uuid,\n          params.reason\n        );\n      case 'refuseInvitation':\n        return ZegoPluginInvitationService.getInstance().refuseInvitation(\n          params.inviterID,\n          params.data\n        );\n      case 'acceptInvitation':\n        return ZegoPluginInvitationService.getInstance().acceptInvitation(\n          params.inviterID,\n          params.data\n        );\n      // UserInRoomAttributes\n      case 'joinRoom':\n        return ZegoPluginUserInRoomAttributesService.getInstance().joinRoom(\n          params.roomID\n        );\n      case 'leaveRoom':\n        return ZegoPluginUserInRoomAttributesService.getInstance().leaveRoom();\n      case 'setUsersInRoomAttributes':\n        return ZegoPluginUserInRoomAttributesService.getInstance().setUsersInRoomAttributes(\n          params.key,\n          params.value,\n          params.userIDs\n        );\n      case 'queryUsersInRoomAttributes':\n        return ZegoPluginUserInRoomAttributesService.getInstance().queryUsersInRoomAttributes(\n          params.nextFlag,\n          params.count\n        );\n      // RoomProperties\n      case 'updateRoomProperty':\n        return ZegoPluginRoomPropertiesService.getInstance().updateRoomProperty(\n          params.key,\n          params.value,\n          params.isDeleteAfterOwnerLeft,\n          params.isForce,\n          params.isUpdateOwner\n        );\n      case 'deleteRoomProperties':\n        return ZegoPluginRoomPropertiesService.getInstance().deleteRoomProperties(\n          params.keys,\n          params.isForce\n        );\n      case 'beginRoomPropertiesBatchOperation':\n        return ZegoPluginRoomPropertiesService.getInstance().beginRoomPropertiesBatchOperation(\n          params.isDeleteAfterOwnerLeft,\n          params.isForce,\n          params.isUpdateOwner\n        );\n      case 'endRoomPropertiesBatchOperation':\n        return ZegoPluginRoomPropertiesService.getInstance().endRoomPropertiesBatchOperation();\n      case 'queryRoomProperties':\n        return ZegoPluginRoomPropertiesService.getInstance().queryRoomProperties();\n      default:\n        return Promise.reject();\n    }\n  }\n  registerPluginEventHandler(event: string, callbackID: string, callback: any) {\n    switch (event) {\n      case 'connectionStateChanged':\n        ZegoPluginInvitationService.getInstance().onConnectionStateChanged(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationReceived':\n        ZegoPluginInvitationService.getInstance().onCallInvitationReceived(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationTimeout':\n        ZegoPluginInvitationService.getInstance().onCallInvitationTimeout(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationResponseTimeout':\n        ZegoPluginInvitationService.getInstance().onCallInviteesAnsweredTimeout(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationAccepted':\n        ZegoPluginInvitationService.getInstance().onCallInvitationAccepted(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationRefused':\n        ZegoPluginInvitationService.getInstance().onCallInvitationRejected(\n          callbackID,\n          callback\n        );\n        break;\n      case 'invitationCanceled':\n        ZegoPluginInvitationService.getInstance().onCallInvitationCancelled(\n          callbackID,\n          callback\n        );\n        break;\n      // UserInRoomAttributes\n      case 'usersInRoomAttributesUpdated':\n        ZegoPluginUserInRoomAttributesService.getInstance().onUsersInRoomAttributesUpdated(\n          callbackID,\n          callback\n        );\n        break;\n      // RoomProperties\n      case 'roomPropertyUpdated':\n        ZegoPluginRoomPropertiesService.getInstance().onRoomPropertyUpdated(\n          callbackID,\n          callback\n        );\n        break;\n      case 'inRoomTextMessageReceived':\n        ZegoPluginRoomPropertiesService.getInstance().onInRoomTextMessageReceived(\n          callbackID,\n          callback\n        );\n        break;\n      default:\n        break;\n    }\n  }\n}\n"],"mappings":"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"}