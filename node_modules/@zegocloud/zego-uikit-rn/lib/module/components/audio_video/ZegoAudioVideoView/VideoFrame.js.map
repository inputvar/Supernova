{"version":3,"names":["React","useEffect","useRef","findNodeHandle","View","StyleSheet","ZegoTextureView","ZegoUIKitInternal","VideoFrame","props","userID","roomID","fillMode","viewRef","console","log","updateRenderingProperty","viewID","current","callbackID","String","Math","floor","random","onSDKConnected","onUserJoin","userInfoList","forEach","user","onVideoViewForceRender","createElement","style","styles","container","videoContainer","ref","collapsable","audioContainer","children","create","flex","width","height","position","top","left","zIndex"],"sources":["VideoFrame.tsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { findNodeHandle, View, StyleSheet } from \"react-native\";\nimport { ZegoTextureView } from 'zego-express-engine-reactnative';\nimport ZegoUIKitInternal from \"../../internal/ZegoUIKitInternal\";\n\nexport default function VideoFrame(props: any) {\n    const { userID, roomID, fillMode } = props;\n    const viewRef = useRef(null);\n    console.log('VideoFrame', userID);\n\n    const updateRenderingProperty = () => {\n        console.log('VideoFrame updateRenderingProperty');\n        const viewID = findNodeHandle(viewRef.current);\n        ZegoUIKitInternal.updateRenderingProperty(userID, viewID, fillMode);\n    }\n    useEffect(() => {\n        updateRenderingProperty();\n\n        const callbackID = 'VideoFrame' + userID + String(Math.floor(Math.random() * 10000));\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            updateRenderingProperty();\n        });\n        ZegoUIKitInternal.onUserJoin(callbackID, (userInfoList: any[]) => {\n            userInfoList.forEach(user => {\n                if (user.userID == userID) {\n                    updateRenderingProperty()\n                }\n            })\n        });\n        ZegoUIKitInternal.onVideoViewForceRender(callbackID, () => {\n            updateRenderingProperty();\n        });\n        return () => {\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n            ZegoUIKitInternal.onUserJoin(callbackID);\n            ZegoUIKitInternal.onVideoViewForceRender(callbackID);\n            ZegoUIKitInternal.updateRenderingProperty(userID, -1, fillMode);\n        }\n    }, []);\n\n    return (\n        <View style={styles.container}>\n            <ZegoTextureView\n                // @ts-ignore\n                style={styles.videoContainer}\n                ref={viewRef}\n                collapsable={false}\n            />\n            <View style={styles.audioContainer}>\n                {props.children}\n            </View>\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n    },\n    videoContainer: {\n        // flex: 1,\n        width: '100%',\n        height: '100%',\n        top: 0,\n        left: 0,\n        position: 'absolute',\n        zIndex: 1,\n    },\n    audioContainer: {\n        width: '100%',\n        height: '100%',\n        top: 0,\n        left: 0,\n        position: 'absolute',\n        zIndex: 2,\n    }\n});"],"mappings":"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"}