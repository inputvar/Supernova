{"version":3,"names":["_logger","require","_defines","_interopRequireDefault","_user_in_room_attributes_core","_ZegoUIKitCorePlugin","_class","obj","__esModule","default","_defineProperty","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","ZegoPluginRoomPropertiesCore","constructor","shared","getInstance","_registerEngineCallback","ZegoUIKitCorePlugin","getZIMPlugin","on","zim","_ref","roomID","infos","zloginfo","forEach","info","_notifyRoomPropertiesUpdated","_ref2","_ref3","messageList","fromConversationID","_notifyInRoomTextMessageReceived","_unregisterEngineCallback","off","notifyData","keys","_onRoomPropertyUpdatedCallbackMap","callbackID","_onInRoomTextMessageReceivedCallbackMap","updateRoomProperty","attributes","config","zlogerror","Promise","reject","ZegoPluginUserInRoomAttributesCore","getRoomBaseInfo","resolve","setRoomAttributes","then","_ref4","resRoomID","errorKeys","ZegoPluginResult","catch","error","code","message","deleteRoomProperties","deleteRoomAttributes","_ref5","beginRoomPropertiesBatchOperation","beginRoomAttributesBatchOperation","endRoomPropertiesBatchOperation","endRoomAttributesBatchOperation","_ref6","queryRoomProperties","queryRoomAllAttributes","_ref7","roomAttributes","onRoomPropertyUpdated","callback","onInRoomTextMessageReceived","exports"],"sources":["room_properties_core.ts"],"sourcesContent":["import type {\n  ZIMMessage,\n  ZIMRoomAttributesBatchOperationConfig,\n  ZIMRoomAttributesDeleteConfig,\n  ZIMRoomAttributesSetConfig,\n  ZIMRoomAttributesUpdateInfo,\n  ZIMEventOfRoomAttributesUpdatedResult,\n  ZIMEventOfReceiveConversationMessageResult,\n  ZIMRoomAttributesOperatedResult,\n  ZIMRoomAttributesBatchOperatedResult,\n  ZIMRoomAttributesQueriedResult,\n  ZIMError,\n} from 'zego-zim-react-native';\nimport { zlogerror, zloginfo } from '../utils/logger';\nimport ZegoPluginResult from './defines';\nimport ZegoPluginUserInRoomAttributesCore from './user_in_room_attributes_core';\nimport ZegoUIKitCorePlugin from \"../../components/internal/ZegoUIKitCorePlugin\";\n\nexport default class ZegoPluginRoomPropertiesCore {\n  static shared: ZegoPluginRoomPropertiesCore;\n  _onRoomPropertyUpdatedCallbackMap: { [index: string]: (notifyData: ZIMRoomAttributesUpdateInfo) => void } = {};\n  _onInRoomTextMessageReceivedCallbackMap: { [index: string]: (notifyData: { messageList: ZIMMessage[]; fromConversationID: string }) => void } = {};\n  constructor() {\n    if (!ZegoPluginRoomPropertiesCore.shared) {\n      ZegoPluginRoomPropertiesCore.shared = this;\n    }\n    return ZegoPluginRoomPropertiesCore.shared;\n  }\n  static getInstance() {\n    if (!ZegoPluginRoomPropertiesCore.shared) {\n      ZegoPluginRoomPropertiesCore.shared = new ZegoPluginRoomPropertiesCore();\n    }\n    return ZegoPluginRoomPropertiesCore.shared;\n  }\n  // ------- internal events register ------\n  _registerEngineCallback() {\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('roomAttributesUpdated', (zim: any, { roomID, infos }: ZIMEventOfRoomAttributesUpdatedResult) => {\n      zloginfo(\n        `[ZegoPluginRoomPropertiesCore]NotifyRoomPropertiesUpdated`,\n        infos\n      );\n      infos.forEach((info) => {\n        this._notifyRoomPropertiesUpdated(info);\n      });\n    });\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'roomAttributesBatchUpdated',\n      (zim: any, { roomID, infos }: ZIMEventOfRoomAttributesUpdatedResult) => {\n        zloginfo(\n          `[ZegoPluginRoomPropertiesCore]NotifyRoomPropertiesUpdated`,\n          infos\n        );\n        infos.forEach((info) => {\n          this._notifyRoomPropertiesUpdated(info);\n        });\n      }\n    );\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('receiveRoomMessage', (zim: any, { messageList, fromConversationID }: ZIMEventOfReceiveConversationMessageResult) => {\n      this._notifyInRoomTextMessageReceived({ messageList, fromConversationID });\n    });\n\n    zloginfo('[ZegoPluginRoomPropertiesCore]Register callback for ZIM...');\n  }\n  _unregisterEngineCallback() {\n    zloginfo('[ZegoPluginRoomPropertiesCore]Unregister callback from ZIM...');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('roomAttributesUpdated');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('roomAttributesBatchUpdated');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('receiveRoomMessage');\n  }\n  // ------- internal events exec ------\n  _notifyRoomPropertiesUpdated(notifyData: ZIMRoomAttributesUpdateInfo) {\n    Object.keys(this._onRoomPropertyUpdatedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onRoomPropertyUpdatedCallbackMap[callbackID]) {\n          this._onRoomPropertyUpdatedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyInRoomTextMessageReceived(notifyData: { messageList: ZIMMessage[]; fromConversationID: string }) {\n    Object.keys(this._onInRoomTextMessageReceivedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onInRoomTextMessageReceivedCallbackMap[callbackID]) {\n          this._onInRoomTextMessageReceivedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  // ------- external method ------\n  updateRoomProperty(attributes: Record<string, string>, config: ZIMRoomAttributesSetConfig) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n      return Promise.reject();\n    }\n    const roomID =\n      ZegoPluginUserInRoomAttributesCore.getInstance().getRoomBaseInfo().roomID;\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .setRoomAttributes(attributes, roomID, config)\n        .then(({ roomID: resRoomID, errorKeys }: ZIMRoomAttributesOperatedResult) => {\n          zloginfo(\n            `[ZegoPluginRoomPropertiesCore]Update the room properties successfully.`\n          );\n          resolve({ ...new ZegoPluginResult('', ''), errorKeys });\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginRoomPropertiesCore]Failed to update room properties, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  deleteRoomProperties(keys: string[], config: ZIMRoomAttributesDeleteConfig) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n      return Promise.reject();\n    }\n    const roomID =\n      ZegoPluginUserInRoomAttributesCore.getInstance().getRoomBaseInfo().roomID;\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .deleteRoomAttributes(keys, roomID, config)\n        .then(({ roomID: resRoomID, errorKeys }: ZIMRoomAttributesOperatedResult) => {\n          zloginfo(\n            `[ZegoPluginRoomPropertiesCore]Delete the room properties successfully.`\n          );\n          resolve({ ...new ZegoPluginResult('', ''), errorKeys });\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginRoomPropertiesCore]Failed to delete room properties, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  beginRoomPropertiesBatchOperation(config: ZIMRoomAttributesBatchOperationConfig) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n      return Promise.reject();\n    }\n    const roomID =\n      ZegoPluginUserInRoomAttributesCore.getInstance().getRoomBaseInfo().roomID;\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().beginRoomAttributesBatchOperation(roomID, config);\n    zloginfo(\n      `[ZegoPluginRoomPropertiesCore]Begin batch operate room properties successfully.`\n    );\n  }\n  endRoomPropertiesBatchOperation() {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n      return Promise.reject();\n    }\n    const roomID =\n      ZegoPluginUserInRoomAttributesCore.getInstance().getRoomBaseInfo().roomID;\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .endRoomAttributesBatchOperation(roomID)\n        .then(({ roomID: resRoomID }: ZIMRoomAttributesBatchOperatedResult) => {\n          zloginfo(\n            `[ZegoPluginRoomPropertiesCore]End batch operate room properties successfully.`\n          );\n          resolve(new ZegoPluginResult('', ''));\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginRoomPropertiesCore]Failed to end batch operate room properties, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  queryRoomProperties() {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n      return Promise.reject();\n    }\n    const roomID =\n      ZegoPluginUserInRoomAttributesCore.getInstance().getRoomBaseInfo().roomID;\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .queryRoomAllAttributes(roomID)\n        .then(({ roomID: resRoomID, roomAttributes }: ZIMRoomAttributesQueriedResult) => {\n          zloginfo(\n            `[ZegoPluginRoomPropertiesCore]Query room all attributes successfully.`\n          );\n          resolve({ roomAttributes, ...new ZegoPluginResult('', '') });\n        })\n        .catch((error: ZIMError) => {\n          zlogerror(\n            `[ZegoPluginRoomPropertiesCore]Failed to query room all properties, code: ${error.code}, message: ${error.message}`\n          );\n          reject(error);\n        });\n    });\n  }\n  onRoomPropertyUpdated(callbackID: string, callback: (notifyData: ZIMRoomAttributesUpdateInfo) => void) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n    }\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onRoomPropertyUpdatedCallbackMap) {\n        zloginfo(\n          '[Core][onRoomPropertyUpdated] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onRoomPropertyUpdatedCallbackMap[callbackID];\n      }\n    } else {\n      this._onRoomPropertyUpdatedCallbackMap[callbackID] = callback;\n    }\n  }\n  onInRoomTextMessageReceived(callbackID: string, callback: (notifyData: { messageList: ZIMMessage[]; fromConversationID: string }) => void) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      zlogerror('[ZegoPluginRoomPropertiesCore]Please initialize it first.');\n    }\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onInRoomTextMessageReceivedCallbackMap) {\n        zloginfo(\n          '[Core][onRoomPropertyUpdated] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onInRoomTextMessageReceivedCallbackMap[callbackID];\n      }\n    } else {\n      this._onInRoomTextMessageReceivedCallbackMap[callbackID] = callback;\n    }\n  }\n}\n"],"mappings":"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"}