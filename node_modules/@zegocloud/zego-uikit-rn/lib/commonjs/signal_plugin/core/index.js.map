{"version":3,"names":["_defines","require","_defines2","_interopRequireDefault","_logger","_user_in_room_attributes_core","_room_properties_core","_ZegoUIKitCorePlugin","_class","obj","__esModule","default","_defineProperty","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","ZegoSignalingPluginCore","constructor","Map","ZIMConnectionState","Disconnected","shared","zloginfo","getInstance","_registerEngineCallback","ZegoUIKitCorePlugin","getZIMPlugin","on","zim","errorInfo","zlogerror","code","message","_ref","state","event","extendedData","_connectionState","_notifyConnectionStateChanged","zlogwarning","_ref2","callID","inviter","timeout","_currentInvitationID","_callIDUsers","set","console","log","notifyData","id","extendedMap","JSON","parse","name","inviter_name","type","data","_notifyCallInvitationReceived","_ref3","delete","_notifyCallInvitationCancelled","_ref4","invitee","_notifyCallInvitationAccepted","_ref5","_notifyCallInvitationRejected","_ref6","_getInviterIDByCallID","_notifyCallInvitationTimeout","_ref7","invitees","map","_notifyCallInviteesAnsweredTimeout","_unregisterEngineCallback","off","keys","_onConnectionStateChangedCallbackMap","forEach","callbackID","_onCallInvitationReceivedCallbackMap","_onCallInvitationCancelledCallbackMap","_onCallInvitationAcceptedCallbackMap","_onCallInvitationRejectedCallbackMap","_onCallInvitationTimeoutCallbackMap","_onCallInviteesAnsweredTimeoutCallbackMap","_resetData","_resetDataForLogout","_isLogin","_loginUser","clear","get","_createHandle","ZegoPluginUserInRoomAttributesCore","ZegoPluginRoomPropertiesCore","getLocalUser","getCallIDByUserID","userID","Array","from","getZIMInstance","getVersion","create","appConfig","login","userInfo","token","arguments","length","Promise","resolve","reject","then","catch","error","logout","destroy","invite","config","warn","callInvite","_ref8","errorInvitees","ZegoPluginResult","errorInviteeIDs","errorInvitee","desc","ZIMCallUserState","Offline","Inviting","push","cancel","callCancel","_ref9","resCallID","inviteeID","accept","callAccept","_ref10","callReject","_ref11","queryCallList","queryCallInvitationList","_ref12","callList","nextFlag","newFlag","onConnectionStateChanged","callback","onCallInvitationReceived","onCallInvitationCancelled","onCallInvitationAccepted","onCallInvitationRejected","onCallInvitationTimeout","onCallInviteesAnsweredTimeout","exports"],"sources":["index.ts"],"sourcesContent":["import type {\n  ZIMAppConfig,\n  ZIMUserInfo,\n  ZIMCallInviteConfig,\n  ZIMCallCancelConfig,\n  ZIMCallAcceptConfig,\n  ZIMCallRejectConfig,\n  ZIMError,\n  ZIMEventOfConnectionStateChangedResult,\n  ZIMEventOfCallInvitationReceivedResult,\n  ZIMEventOfCallInvitationCancelledResult,\n  ZIMEventOfCallInvitationAcceptedResult,\n  ZIMEventOfCallInvitationRejectedResult,\n  ZIMEventOfCallInvitationTimeoutResult,\n  ZIMEventOfCallInviteesAnsweredTimeoutResult,\n  ZIMCallInvitationSentResult,\n  ZIMCallCancelSentResult,\n  ZIMCallAcceptanceSentResult,\n  ZIMCallRejectionSentResult,\n  ZIMCallInvitationQueryConfig,\n  ZIMCallInvitationListQueriedResult,\n  ZIMCallInfo,\n} from 'zego-zim-react-native';\nimport { ZIMConnectionState, ZIMCallUserState } from \"../defines\";\nimport ZegoPluginResult from './defines';\nimport { zlogerror, zloginfo, zlogwarning } from '../utils/logger';\nimport ZegoPluginUserInRoomAttributesCore from './user_in_room_attributes_core';\nimport ZegoPluginRoomPropertiesCore from './room_properties_core';\nimport ZegoUIKitCorePlugin from \"../../components/internal/ZegoUIKitCorePlugin\";\n\nexport default class ZegoSignalingPluginCore {\n  static shared: ZegoSignalingPluginCore;\n  _loginUser = {} as ZIMUserInfo;\n  _isLogin = false;\n  _callIDUsers = new Map<string, string>(); // <zim call id, user id>\n  _connectionState = ZIMConnectionState.Disconnected;\n  _onConnectionStateChangedCallbackMap: { [index: string]: (notifyData: { state: ZIMConnectionState }) => void } = {};\n  _onCallInvitationReceivedCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    inviter: { name: string; id: string; }; type: number; data: string;\n  }) => void } = {};\n  _onCallInvitationCancelledCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationAcceptedCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationRejectedCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInvitationTimeoutCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void } = {};\n  _onCallInviteesAnsweredTimeoutCallbackMap: { [index: string]: (notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) => void } = {};\n  _currentInvitationID = ''\n  constructor() {\n    if (!ZegoSignalingPluginCore.shared) {\n      zloginfo('[Core]ZegoSignalingPluginCore successful instantiation.');\n      ZegoSignalingPluginCore.shared = this;\n    }\n    return ZegoSignalingPluginCore.shared;\n  }\n  static getInstance() {\n    if (!ZegoSignalingPluginCore.shared) {\n      ZegoSignalingPluginCore.shared = new ZegoSignalingPluginCore();\n    }\n    return ZegoSignalingPluginCore.shared;\n  }\n  // ------- internal events register ------\n  _registerEngineCallback() {\n    zloginfo('[Core]Register callback for ZIM...');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('error', (zim: any, errorInfo: ZIMError) => {\n      zlogerror(\n        `[Core]Zim error, code:${errorInfo.code}, message:${errorInfo.message}.`\n      );\n    });\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'connectionStateChanged',\n      (zim: any, { state, event, extendedData }: ZIMEventOfConnectionStateChangedResult) => {\n        zloginfo(\n          `[Core]Connection state changed, state:${state}, event:${event}, extended data:${extendedData}`\n        );\n        this._connectionState = state;\n        this._notifyConnectionStateChanged({ state });\n        if (this._connectionState === ZIMConnectionState.Disconnected) {\n          zlogwarning('[Core]Disconnected, auto logout.');\n          // this.logout();\n        }\n      }\n    );\n    // Callback of the call invitation received by the invitee.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'callInvitationReceived',\n      (zim: any, { callID, inviter, timeout, extendedData }: ZIMEventOfCallInvitationReceivedResult) => {\n        zloginfo(\n          '[Core][callInvitationReceived callback]',\n          callID,\n          inviter,\n          timeout,\n          extendedData\n        );\n        if (this._currentInvitationID == callID) {\n          return\n        } else {\n          this._currentInvitationID = callID\n        }\n        this._callIDUsers.set(callID, inviter);\n        console.log('ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().onCallInvitationReceived', callID, extendedData)\n        \n        const notifyData: any = { callID, inviter: { id: inviter } };\n        if (extendedData) {\n          const extendedMap = JSON.parse(extendedData);\n          notifyData.inviter.name = extendedMap.inviter_name;\n          notifyData.type = extendedMap.type;\n          notifyData.data = extendedMap.data;\n        }\n        this._notifyCallInvitationReceived(notifyData);\n      }\n    );\n    // Callback of the disinvitation notification received by the invitee.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'callInvitationCancelled',\n      (zim: any, { callID, inviter, extendedData }: ZIMEventOfCallInvitationCancelledResult) => {\n        zloginfo(\n          '[Core][callInvitationCancelled callback]',\n          callID,\n          inviter,\n          extendedData\n        );\n        this._callIDUsers.delete(callID);\n        const notifyData = {\n          callID,\n          inviter: { id: inviter, name: '' },\n          data: extendedData,\n        };\n        this._notifyCallInvitationCancelled(notifyData);\n      }\n    );\n    // Callback of the invitation acceptance notification received by the inviter.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'callInvitationAccepted',\n      (zim: any, { callID, invitee, extendedData }: ZIMEventOfCallInvitationAcceptedResult) => {\n        zloginfo(\n          '[Core][callInvitationAccepted callback]',\n          callID,\n          invitee,\n          extendedData\n        );\n        const notifyData = {\n          callID,\n          invitee: { id: invitee, name: '' },\n          data: extendedData,\n        };\n        this._notifyCallInvitationAccepted(notifyData);\n      }\n    );\n    // Callback of notification received by the inviter that the inviter has declined the invitation.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'callInvitationRejected',\n      (zim: any, { callID, invitee, extendedData }: ZIMEventOfCallInvitationRejectedResult) => {\n        zloginfo(\n          '[Core][callInvitationRejected callback]',\n          callID,\n          invitee,\n          extendedData\n        );\n        const notifyData = {\n          callID,\n          invitee: { id: invitee, name: '' },\n          data: extendedData,\n        };\n        this._notifyCallInvitationRejected(notifyData);\n      }\n    );\n    // Call invitation timeout notification callback for the invitee.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on('callInvitationTimeout', (zim: any, { callID }: ZIMEventOfCallInvitationTimeoutResult) => {\n      zloginfo('[Core][callInvitationTimeout callback]', callID);\n      const notifyData = {\n        callID,\n        inviter: { id: this._getInviterIDByCallID(callID), name: '' },\n        data: '',\n      };\n      this._notifyCallInvitationTimeout(notifyData);\n    });\n    // Call invitation timeout notification callback by the inviter.\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().on(\n      'callInviteesAnsweredTimeout',\n      (zim: any, { callID, invitees }: ZIMEventOfCallInviteesAnsweredTimeoutResult) => {\n        zloginfo(\n          '[Core][callInviteesAnsweredTimeout callback]',\n          callID,\n          invitees\n        );\n        const notifyData = {\n          callID,\n          invitees: invitees.map((invitee) => {\n            return { id: invitee, name: '' };\n          }),\n          data: '',\n        };\n        this._notifyCallInviteesAnsweredTimeout(notifyData);\n      }\n    );\n  }\n  _unregisterEngineCallback() {\n    zloginfo('[Core]Unregister callback from ZIM...');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('error');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('connectionStateChanged');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInvitationReceived');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInvitationCancelled');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInvitationAccepted');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInvitationRejected');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInvitationTimeout');\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().off('callInviteesAnsweredTimeout');\n  }\n  // ------- internal events exec ------\n  _notifyConnectionStateChanged(notifyData: { state: ZIMConnectionState }) {\n    Object.keys(this._onConnectionStateChangedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onConnectionStateChangedCallbackMap[callbackID]) {\n          this._onConnectionStateChangedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationReceived(notifyData: {\n    callID: string;\n    inviter: { name: string; id: string; };\n    type: number;\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationReceivedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationReceivedCallbackMap[callbackID]) {\n          this._onCallInvitationReceivedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationCancelled(notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationCancelledCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationCancelledCallbackMap[callbackID]) {\n          this._onCallInvitationCancelledCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationAccepted(notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationAcceptedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationAcceptedCallbackMap[callbackID]) {\n          this._onCallInvitationAcceptedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationRejected(notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationRejectedCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationRejectedCallbackMap[callbackID]) {\n          this._onCallInvitationRejectedCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInvitationTimeout(notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) {\n    Object.keys(this._onCallInvitationTimeoutCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInvitationTimeoutCallbackMap[callbackID]) {\n          this._onCallInvitationTimeoutCallbackMap[callbackID](notifyData);\n        }\n      }\n    );\n  }\n  _notifyCallInviteesAnsweredTimeout(notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) {\n    Object.keys(this._onCallInviteesAnsweredTimeoutCallbackMap).forEach(\n      (callbackID) => {\n        if (this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID]) {\n          this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID](\n            notifyData\n          );\n        }\n      }\n    );\n  }\n  // ------- internal utils ------\n  _resetData() {\n    this._resetDataForLogout();\n  }\n  _resetDataForLogout() {\n    this._isLogin = false;\n    this._loginUser = {} as ZIMUserInfo;\n    this._callIDUsers.clear();\n    this._connectionState = ZIMConnectionState.Disconnected;\n  }\n  _getInviterIDByCallID(callID: string) {\n    return this._callIDUsers.get(callID);\n  }\n  _createHandle() {\n    this._unregisterEngineCallback();\n    this._registerEngineCallback();\n    // live audio room\n    ZegoPluginUserInRoomAttributesCore.getInstance()._unregisterEngineCallback();\n    ZegoPluginUserInRoomAttributesCore.getInstance()._registerEngineCallback();\n    ZegoPluginRoomPropertiesCore.getInstance()._unregisterEngineCallback();\n    ZegoPluginRoomPropertiesCore.getInstance()._registerEngineCallback();\n  }\n  // ------- external utils ------\n  getLocalUser() {\n    return this._loginUser;\n  }\n  getCallIDByUserID(userID: string) {\n    let callID = '';\n    Array.from(this._callIDUsers.keys()).forEach((key) => {\n      const value = this._callIDUsers.get(key);\n      if (userID === value) {\n        callID = key;\n        zloginfo('[Core]getCallIDByUserID', userID, this._callIDUsers, callID);\n      }\n    });\n    return callID;\n  }\n  // ------- external method ------\n  getZIMInstance() {\n    return ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance();\n  }\n  getVersion(): Promise<string> {\n    return ZegoUIKitCorePlugin.getZIMPlugin().default.getVersion();\n  }\n  create(appConfig: ZIMAppConfig) {\n    if (!ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()) {\n      const zim = ZegoUIKitCorePlugin.getZIMPlugin().default.create(appConfig);\n      if (!zim) {\n        zlogerror('[Core]Create zim error.');\n      } else {\n        zloginfo('[Core]Create zim success.');\n        this._createHandle();\n      }\n    } else {\n      zlogwarning('[Core]Zim has created.');\n      this._createHandle();\n    }\n  }\n  login(userInfo: ZIMUserInfo, token = ''): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (!this._isLogin) {\n        ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n          .login(userInfo, token)\n          .then(() => {\n            zloginfo('[Core]Login success.');\n            this._loginUser = userInfo;\n            this._isLogin = true;\n            resolve();\n          }).catch((error: ZIMError) => {\n            if (error.code == 6000111) {\n              zloginfo('[Core]Login already success.', error);\n              resolve();\n            } else {\n              reject(error);\n            }\n          });\n      } else {\n        zloginfo('[Core]Login already success.');\n        resolve();\n      }\n    });\n  }\n  logout(): Promise<void> {\n    return ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n      .logout()\n      .then(() => {\n        zloginfo('[Core]Logout success.');\n        this._resetDataForLogout();\n        // live audio room\n        ZegoPluginUserInRoomAttributesCore.getInstance()._resetData();\n      });\n  }\n  destroy() {\n    ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance().destroy();\n    zloginfo('[Core]Destroy success.');\n    this._resetData();\n  }\n  invite(invitees: string[], config: ZIMCallInviteConfig): Promise<{ callID: string; errorInvitees: string[]; code: string, message: string; }> {\n    return new Promise((resolve, reject) => {\n      console.warn(invitees);\n      console.warn(config);\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callInvite(invitees, config)\n        .then(({ callID, timeout, errorInvitees }: ZIMCallInvitationSentResult) => {\n          this._callIDUsers.set(callID, this._loginUser.userID);\n          if (!errorInvitees || !errorInvitees.length) {\n            zloginfo(`[Core]Invite done, call id: ${callID}`);\n            resolve({\n              ...new ZegoPluginResult('', ''),\n              callID,\n              errorInvitees: [],\n            });\n          } else {\n            const errorInviteeIDs: string[] = [];\n            errorInvitees.forEach((errorInvitee) => {\n              const desc =\n                errorInvitee.state === ZIMCallUserState.Offline\n                  ? 'offine'\n                  : errorInvitee.state === ZIMCallUserState.Inviting\n                  ? 'inviting'\n                  : '';\n              zlogwarning(\n                `[Core]Invite error, invitee id: ${errorInvitee.userID}, invitee state: ${errorInvitee.state}, state desc: ${desc}`\n              );\n              errorInviteeIDs.push(errorInvitee.userID);\n            });\n            resolve({\n              ...new ZegoPluginResult('', ''),\n              callID,\n              errorInvitees: errorInviteeIDs,\n            });\n          }\n        })\n        .catch((error: ZIMError) => {\n          reject(error);\n        });\n    });\n  }\n  cancel(invitees: string[], callID: string, config: ZIMCallCancelConfig): Promise<{ code: string, message: string; errorInvitees: string[]; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callCancel(invitees, callID, config)\n        .then(({ callID: resCallID, errorInvitees }: ZIMCallCancelSentResult) => {\n          this._callIDUsers.delete(callID);\n          if (!errorInvitees || !errorInvitees.length) {\n            zloginfo(`[Core]Cancel invitation done, call id: ${callID}`);\n            resolve({ ...new ZegoPluginResult('', ''), errorInvitees: [] });\n          } else {\n            errorInvitees.forEach((inviteeID) => {\n              zlogwarning(\n                `[Core]Cancel invitation error, invitee id: ${inviteeID}`\n              );\n            });\n            resolve({ ...new ZegoPluginResult('', ''), errorInvitees });\n          }\n        })\n        .catch((error: ZIMError) => {\n          reject(error);\n        });\n    });\n  }\n  accept(callID: string, config: ZIMCallAcceptConfig): Promise<{ code: string, message: string; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callAccept(callID, config)\n        .then(({ callID: resCallID }: ZIMCallAcceptanceSentResult) => {\n          zloginfo(`[Core]Accept invitation done, call id: ${callID}`);\n          resolve(new ZegoPluginResult());\n        })\n        .catch((error: ZIMError) => {\n          reject(error);\n        });\n    });\n  }\n  reject(callID: string, config: ZIMCallRejectConfig): Promise<{ code: string, message: string; }> {\n    return new Promise((resolve, reject) => {\n      ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .callReject(callID, config)\n        .then(({ callID: resCallID }: ZIMCallRejectionSentResult) => {\n          zloginfo(`[Core]Reject invitation done, call id: ${callID}`);\n          this._callIDUsers.delete(callID);\n          resolve(new ZegoPluginResult());\n        })\n        .catch((error: ZIMError) => {\n          reject(error);\n        });\n    });\n  }\n  queryCallList(config: ZIMCallInvitationQueryConfig): Promise<{ callList: ZIMCallInfo[], nextFlag: number; }> {\n    return new Promise((resolve, reject) => {\n        ZegoUIKitCorePlugin.getZIMPlugin().default.getInstance()\n        .queryCallInvitationList(config)\n        .then(({callList, nextFlag: newFlag} : ZIMCallInvitationListQueriedResult) => {\n            zloginfo(`[Core]Query invitation list done, nextFlag: ${newFlag}, calllist: ${callList.length}`);\n            const data = {callList: callList, nextFlag: newFlag};\n            resolve(data);\n        })\n        .catch((error: ZIMError) => {\n            reject(error);\n        })\n    });\n  }\n  // ------- external events register ------\n  onConnectionStateChanged(callbackID: string, callback: (notifyData: { state: ZIMConnectionState }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onConnectionStateChangedCallbackMap) {\n        zloginfo(\n          '[Core][onConnectionStateChanged] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onConnectionStateChangedCallbackMap[callbackID];\n      }\n    } else {\n      this._onConnectionStateChangedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationReceived(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { name: string; id: string; }; type: number; data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationReceivedCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationReceived] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationReceivedCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationReceivedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationCancelled(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationCancelledCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationCancelled] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationCancelledCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationCancelledCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationAccepted(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationAcceptedCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationAccepted] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationAcceptedCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationAcceptedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationRejected(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationRejectedCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationRejected] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationRejectedCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationRejectedCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInvitationTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInvitationTimeoutCallbackMap) {\n        zloginfo(\n          '[Core][onCallInvitationTimeout] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInvitationTimeoutCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInvitationTimeoutCallbackMap[callbackID] = callback;\n    }\n  }\n  onCallInviteesAnsweredTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) => void) {\n    if (typeof callback !== 'function') {\n      if (callbackID in this._onCallInviteesAnsweredTimeoutCallbackMap) {\n        zloginfo(\n          '[Core][onCallInviteesAnsweredTimeout] Remove callback for: [',\n          callbackID,\n          '] because callback is not a valid function!'\n        );\n        delete this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID];\n      }\n    } else {\n      this._onCallInviteesAnsweredTimeoutCallbackMap[callbackID] = callback;\n    }\n  }\n}\n"],"mappings":"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"}