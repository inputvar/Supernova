{"version":3,"names":["_core","_interopRequireDefault","require","_defines","_logger","_ZegoUIKitCorePlugin","_reactNative","_class","obj","__esModule","default","_defineProperty","key","value","_toPropertyKey","Object","defineProperty","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","ZegoPluginInvitationService","constructor","shared","_notifyWhenAppRunningInBackgroundOrQuit","getInstance","setBackgroundMessageHandler","ZegoUIKitCorePlugin","getZPNsPlugin","message","zloginfo","dataObj","JSON","parse","extras","payload","zim_call_id","call_id","getAndroidOfflineDataHandler","setAndroidOfflineDataHandler","handler","_androidOfflineDataHandler","setIOSOfflineDataHandler","_iOSOfflineDataHandler","onCallKitAnswerCall","_callKitAnswerCallHandler","onCallKitEndCall","_callKitEndCallHandler","getIOSOfflineDataHandler","getAnswerCallHandle","getEndCallHandle","reportCallKitCallEnded","uuid","reason","CallKit","reportCallEnded","getZIMInstance","ZegoSignalingPluginCore","getVersion","init","appID","appSign","create","uninit","destroy","login","userID","userName","token","logout","enableNotifyWhenAppRunningInBackgroundOrQuit","enable","isIOSDevelopmentEnvironment","appName","Platform","OS","CXProviderConfiguration","localizedName","iconTemplateImageName","setInitConfiguration","applyNotificationPermission","iOSEnvironment","console","log","registerPush","enableIOSVoIP","setPushConfig","on","action","fulfill","off","sendInvitation","inviterName","invitees","timeout","type","data","notificationConfig","length","zlogerror","Promise","reject","ZegoPluginResult","config","extendedData","stringify","inviter_name","pushConfig","title","content","resourcesID","resourceID","invite","cancelInvitation","map","invitee","callID","getCallIDByUserID","getLocalUser","cancel","refuseInvitation","inviterID","acceptInvitation","accept","queryCallList","count","nextFlag","onConnectionStateChanged","callbackID","callback","onCallInvitationReceived","onCallInvitationTimeout","onCallInviteesAnsweredTimeout","onCallInvitationAccepted","onCallInvitationRejected","onCallInvitationCancelled","exports"],"sources":["index.ts"],"sourcesContent":["import ZegoSignalingPluginCore from '../core';\nimport ZegoPluginResult from '../core/defines';\nimport { zlogerror, zloginfo } from '../utils/logger';\nimport type { CXAction, ZPNsRegisterMessage, ZPNsMessage } from 'zego-zpns-react-native';\nimport type { ZIMCallInviteConfig, ZIMCallCancelConfig, ZIMConnectionState } from 'zego-zim-react-native';\nimport { CXCallEndedReason } from '../defines';\nimport ZegoUIKitCorePlugin from '../../components/internal/ZegoUIKitCorePlugin';\nimport { Platform } from 'react-native';\n\nexport default class ZegoPluginInvitationService {\n  static shared: ZegoPluginInvitationService;\n  _notifyWhenAppRunningInBackgroundOrQuit: boolean;\n  _androidOfflineDataHandler: (data: any) => void;\n  _iOSOfflineDataHandler: (data: any, uuid: string) => void;\n  _callKitAnswerCallHandler: (action: CXAction) => void;\n  _callKitEndCallHandler: (action: CXAction) => void;\n\n  constructor() {\n    if (!ZegoPluginInvitationService.shared) {\n      this._notifyWhenAppRunningInBackgroundOrQuit = true;\n      ZegoPluginInvitationService.shared = this;\n    }\n    return ZegoPluginInvitationService.shared;\n  }\n  static getInstance() {\n    if (!ZegoPluginInvitationService.shared) {\n      ZegoPluginInvitationService.shared = new ZegoPluginInvitationService();\n    }\n    return ZegoPluginInvitationService.shared;\n  }\n  setBackgroundMessageHandler() {\n    ZegoUIKitCorePlugin.getZPNsPlugin().default.setBackgroundMessageHandler((message: ZPNsMessage) => {\n      zloginfo('ZPNs setBackgroundMessageHandler: ', message)\n      const dataObj = JSON.parse(message.extras.payload);\n      dataObj.zim_call_id = message.extras.call_id;\n      ZegoPluginInvitationService.getInstance().getAndroidOfflineDataHandler()(dataObj)\n    })\n  }\n  setAndroidOfflineDataHandler(handler: (data: any) => void) {\n    this._androidOfflineDataHandler = handler;\n  }\n  getAndroidOfflineDataHandler() {\n    return this._androidOfflineDataHandler;\n  }\n  setIOSOfflineDataHandler(handler: (data: any, uuid: string) => void) {\n    this._iOSOfflineDataHandler = handler;\n  }\n  onCallKitAnswerCall(handler: (action: CXAction) => void) {\n    this._callKitAnswerCallHandler = handler;\n  }\n  onCallKitEndCall(handler: (action: CXAction) => void) {\n    this._callKitEndCallHandler = handler;\n  }\n  getIOSOfflineDataHandler() {\n    return this._iOSOfflineDataHandler;\n  }\n  getAnswerCallHandle() {\n    return this._callKitAnswerCallHandler;\n  }\n  getEndCallHandle() {\n    return this._callKitEndCallHandler;\n  }\n  reportCallKitCallEnded(uuid: string, reason: number) {\n    return ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().reportCallEnded(reason, uuid);\n  }\n  getZIMInstance() {\n    return ZegoSignalingPluginCore.getInstance().getZIMInstance();\n  }\n  getVersion() {\n    return ZegoSignalingPluginCore.getInstance().getVersion();\n  }\n  init(appID: number, appSign: string) {\n    ZegoSignalingPluginCore.getInstance().create({\n      appID,\n      appSign,\n    });\n  }\n  uninit() {\n    ZegoSignalingPluginCore.getInstance().destroy();\n  }\n  login(userID: string, userName: string, token?: string) {\n    return ZegoSignalingPluginCore.getInstance().login(\n      {\n        userID,\n        userName,\n      },\n      token\n    );\n  }\n  logout() {\n    return ZegoSignalingPluginCore.getInstance().logout();\n  }\n\n  enableNotifyWhenAppRunningInBackgroundOrQuit(enable: boolean, isIOSDevelopmentEnvironment?: boolean, appName?: string) {\n    this._notifyWhenAppRunningInBackgroundOrQuit = enable;\n\n    if (enable) {\n      if (Platform.OS === 'ios') {\n        const CXProviderConfiguration = {\n          localizedName: appName ?? 'My app',\n          iconTemplateImageName: \"AppIcon\",\n        };\n        ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.setInitConfiguration(CXProviderConfiguration);\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().applyNotificationPermission();\n        \n        const iOSEnvironment = isIOSDevelopmentEnvironment == null ? 2 : (isIOSDevelopmentEnvironment ? 1 : 0);\n        console.log('#########registerPush, iOSEnvironment', iOSEnvironment);\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().registerPush({ \n          enableIOSVoIP: true,\n          iOSEnvironment: iOSEnvironment,\n        });\n      } else {\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.setPushConfig({ \"enableFCMPush\": true, \"enableHWPush\": false, \"enableMiPush\": false, \"enableOppoPush\": false, \"enableVivoPush\": false });\n\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().registerPush({ enableIOSVoIP: true });\n      }\n\n\n      ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"registered\", (message: ZPNsRegisterMessage) => {\n        console.log(\"@@@@@@@@@@@@@@@@>>>>>>>>>>>>>>>############\", message)\n      });\n\n      // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"notificationArrived\", (message) => {\n      //   console.log(\"@@@@@@@@@@@@@@@@notificationArrived>>>>>>>>>>>>>>>############\", getCallID(message))\n      //   setZpnState(\"notificationArrived: \" + getCallID(message))\n      // })\n      // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"notificationClicked\", (message) => {\n      //   console.log(\"@@@@@@@@@@@@@@@@notificationClicked>>>>>>>>>>>>>>>############\", getCallID(message))\n      //   setZpnState(\"notificationClicked: \" + getCallID(message))\n      // })\n      // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().on(\"throughMessageReceived\", (message) => {\n      //   console.log(\"@@@@@@@@@@@@@@@@throughMessageReceived>>>>>>>>>>>>>>>############\", getCallID(message))\n      //   setZpnState(\"throughMessageReceived: \" + getCallID(message))\n      // })\n\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"didReceiveIncomingPush\", (extras: Record<string, any>, uuid: string) => {\n        console.log('#########didReceiveIncomingPush', extras, uuid);\n        let { payload } = extras;\n        let { call_id } = extras;\n        const dataObj = payload ? JSON.parse(payload) : {};\n        dataObj.zim_call_id = call_id;\n        ZegoPluginInvitationService.getInstance().getIOSOfflineDataHandler()(dataObj, uuid);\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"providerDidReset\", () => {\n        console.log('#########providerDidReset');\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"providerDidBegin\", () => {\n        console.log('#########providerDidBegin');\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"didActivateAudioSession\", () => {\n        console.log('#########didActivateAudioSession');\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"didDeactivateAudioSession\", () => {\n        console.log('#########didDeactivateAudioSession');\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"timedOutPerformingAction\", (action: CXAction) => {\n        console.log('#########timedOutPerformingAction', action);\n        action.fulfill();\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performStartCallAction\", (action: CXAction) => {\n        console.log('#########performStartCallAction', action);\n        action.fulfill();\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performAnswerCallAction\", (action: CXAction) => {\n        console.log('#########performAnswerCallAction', action);\n        ZegoPluginInvitationService.getInstance().getAnswerCallHandle()(action);\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performEndCallAction\", (action: CXAction) => {\n        console.log('#########performEndCallAction', action);\n        ZegoPluginInvitationService.getInstance().getEndCallHandle()(action);\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performSetHeldCallAction\", (action: CXAction) => {\n        console.log('#########performSetHeldCallAction', action);\n        action.fulfill();\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performSetMutedCallAction\", (action: CXAction) => {\n        console.log('#########performSetMutedCallAction', action);\n        action.fulfill();\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performSetGroupCallAction\", (action: CXAction) => {\n        console.log('#########performSetGroupCallAction', action);\n        action.fulfill();\n      });\n      ZegoUIKitCorePlugin.getZPNsPlugin().CallKit.getInstance().on(\"performPlayDTMFCallAction\", (action: CXAction) => {\n        console.log('#########performPlayDTMFCallAction', action);\n        action.fulfill();\n      });\n    } else {\n      if (ZegoUIKitCorePlugin.getZPNsPlugin()) {\n        // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().unregisterPush();\n        ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().off(\"registered\")\n        // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().off(\"notificationArrived\")\n        // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().off(\"notificationClicked\")\n        // ZegoUIKitCorePlugin.getZPNsPlugin().default.getInstance().off(\"throughMessageReceived\")\n      }\n    }\n\n  }\n  sendInvitation(inviterName: string, invitees: string[], timeout: number, type: number, data?: string, notificationConfig?: any) {\n\n    // invitees = invitees.map((invitee) => invitee);\n    if (!invitees.length) {\n      zlogerror('[Service]Send invitees is empty.');\n      return Promise.reject(new ZegoPluginResult());\n    }\n    const config = { timeout } as ZIMCallInviteConfig;\n    config.extendedData = JSON.stringify({\n      inviter_name: inviterName,\n      type,\n      data,\n    });\n\n    if (this._notifyWhenAppRunningInBackgroundOrQuit) {\n      config.pushConfig = {\n        title: notificationConfig.title ?? \"\",\n        content: notificationConfig.message ?? \"\",\n        resourcesID: notificationConfig.resourceID ?? \"\",\n        payload: data\n      };\n    }\n    zloginfo(\n      `[Service]Send invitation: invitees: ${invitees}, timeout: ${timeout}, type: ${type}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().invite(invitees, config);\n  }\n  cancelInvitation(invitees: string[], data?: string, notificationConfig?: any) {\n    invitees = invitees.map((invitee) => invitee);\n    if (!invitees.length) {\n      zlogerror('[Service]Cancel invitees is empty.');\n      return Promise.reject(new ZegoPluginResult());\n    }\n    const config = { extendedData: data } as ZIMCallCancelConfig;\n    if (this._notifyWhenAppRunningInBackgroundOrQuit) {\n      config.pushConfig = {\n        title: notificationConfig && notificationConfig.title,\n        content: notificationConfig && notificationConfig.message,\n        resourcesID: notificationConfig && notificationConfig.resourceID,\n        payload: data\n      };\n    }\n    const callID = ZegoSignalingPluginCore.getInstance().getCallIDByUserID(\n      ZegoSignalingPluginCore.getInstance().getLocalUser().userID\n    );\n    zloginfo(\n      `[Service]Cancel invitation: callID: ${callID}, invitees: ${invitees}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().cancel(\n      invitees,\n      callID,\n      config\n    );\n  }\n  refuseInvitation(inviterID: string, data?: string) {\n    let callID;\n    // Parse data and adapt automatic rejection\n    if (data) {\n      const dataObj = JSON.parse(data);\n      callID = dataObj.callID;\n    } else {\n      callID =\n        ZegoSignalingPluginCore.getInstance().getCallIDByUserID(inviterID);\n    }\n    if (!callID) {\n      zlogerror('[Service]Call id corresponding to the inviterID is empty.');\n      return Promise.reject(new ZegoPluginResult());\n    }\n    const config = { extendedData: data };\n    zloginfo(\n      `[Service]Refuse invitation: callID: ${callID}, inviter id: ${inviterID}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().reject(callID, config);\n  }\n  acceptInvitation(inviterID: string, data?: string) {\n    const callID =\n      ZegoSignalingPluginCore.getInstance().getCallIDByUserID(inviterID);\n    if (!callID) {\n      zloginfo('[Service]Call id corresponding to the inviterID is empty.', inviterID, data);\n      return Promise.reject(new ZegoPluginResult());\n    }\n    const config = { extendedData: data };\n    zloginfo(\n      `[Service]Accept invitation: callID: ${callID}, inviter id: ${inviterID}, data: ${data}.`\n    );\n    return ZegoSignalingPluginCore.getInstance().accept(callID, config);\n  }\n\n  queryCallList(count: number, nextFlag?: number) {\n    const config = { count: count, nextFlag: nextFlag}\n    return ZegoSignalingPluginCore.getInstance().queryCallList(config);\n  }\n\n  onConnectionStateChanged(callbackID: string, callback: (notifyData: { state: ZIMConnectionState }) => void) {\n    ZegoSignalingPluginCore.getInstance().onConnectionStateChanged(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationReceived(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { name: string; id: string; };\n    type: number;\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationReceived(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationTimeout(\n      callbackID,\n      callback\n    );\n  }\n  onCallInviteesAnsweredTimeout(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitees: { id: string; name: string; }[];\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInviteesAnsweredTimeout(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationAccepted(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationAccepted(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationRejected(callbackID: string, callback: (notifyData: {\n    callID: string;\n    invitee: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationRejected(\n      callbackID,\n      callback\n    );\n  }\n  onCallInvitationCancelled(callbackID: string, callback: (notifyData: {\n    callID: string;\n    inviter: { id: string; name: string; };\n    data: string;\n  }) => void) {\n    ZegoSignalingPluginCore.getInstance().onCallInvitationCancelled(\n      callbackID,\n      callback\n    );\n  }\n}\n"],"mappings":"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"}