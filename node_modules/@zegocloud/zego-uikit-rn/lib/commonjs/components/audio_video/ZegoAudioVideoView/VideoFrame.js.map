{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_zegoExpressEngineReactnative","_ZegoUIKitInternal","_interopRequireDefault","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","VideoFrame","props","userID","roomID","fillMode","viewRef","useRef","console","log","updateRenderingProperty","viewID","findNodeHandle","current","ZegoUIKitInternal","useEffect","callbackID","String","Math","floor","random","onSDKConnected","onUserJoin","userInfoList","forEach","user","onVideoViewForceRender","createElement","View","style","styles","container","ZegoTextureView","videoContainer","ref","collapsable","audioContainer","children","StyleSheet","create","flex","width","height","position","top","left","zIndex"],"sources":["VideoFrame.tsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { findNodeHandle, View, StyleSheet } from \"react-native\";\nimport { ZegoTextureView } from 'zego-express-engine-reactnative';\nimport ZegoUIKitInternal from \"../../internal/ZegoUIKitInternal\";\n\nexport default function VideoFrame(props: any) {\n    const { userID, roomID, fillMode } = props;\n    const viewRef = useRef(null);\n    console.log('VideoFrame', userID);\n\n    const updateRenderingProperty = () => {\n        console.log('VideoFrame updateRenderingProperty');\n        const viewID = findNodeHandle(viewRef.current);\n        ZegoUIKitInternal.updateRenderingProperty(userID, viewID, fillMode);\n    }\n    useEffect(() => {\n        updateRenderingProperty();\n\n        const callbackID = 'VideoFrame' + userID + String(Math.floor(Math.random() * 10000));\n        ZegoUIKitInternal.onSDKConnected(callbackID, () => {\n            updateRenderingProperty();\n        });\n        ZegoUIKitInternal.onUserJoin(callbackID, (userInfoList: any[]) => {\n            userInfoList.forEach(user => {\n                if (user.userID == userID) {\n                    updateRenderingProperty()\n                }\n            })\n        });\n        ZegoUIKitInternal.onVideoViewForceRender(callbackID, () => {\n            updateRenderingProperty();\n        });\n        return () => {\n            ZegoUIKitInternal.onSDKConnected(callbackID);\n            ZegoUIKitInternal.onUserJoin(callbackID);\n            ZegoUIKitInternal.onVideoViewForceRender(callbackID);\n            ZegoUIKitInternal.updateRenderingProperty(userID, -1, fillMode);\n        }\n    }, []);\n\n    return (\n        <View style={styles.container}>\n            <ZegoTextureView\n                // @ts-ignore\n                style={styles.videoContainer}\n                ref={viewRef}\n                collapsable={false}\n            />\n            <View style={styles.audioContainer}>\n                {props.children}\n            </View>\n        </View>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        width: '100%',\n        height: '100%',\n        position: 'absolute',\n    },\n    videoContainer: {\n        // flex: 1,\n        width: '100%',\n        height: '100%',\n        top: 0,\n        left: 0,\n        position: 'absolute',\n        zIndex: 1,\n    },\n    audioContainer: {\n        width: '100%',\n        height: '100%',\n        top: 0,\n        left: 0,\n        position: 'absolute',\n        zIndex: 2,\n    }\n});"],"mappings":"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"}